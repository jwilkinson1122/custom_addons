<?xml version='1.0' encoding='utf-8'?>
<odoo>
	<data>
		<record id="patient_hospitalization_view_tree_new" model="ir.ui.view">
			<field name="name">patient.hospitalization.view.form.popup</field>
			<field name="model">patient.hospitalization</field>
			<field name="priority">20</field>
			<field name="arch" type="xml">
				<tree>
					<field name="partner_id"/>
					<field name="registration_no"/>
					<field name="disease_type_id"/>
					<field name="partner_id"/>
					<field name="operating_id"/>
					<field name="admit_date"/>
					<field name="discharge_date"/>
					<field name="state"/>
				</tree>
			</field>
		</record>
		<!---->
		<record id="patient_hospitalization_view_form_new" model="ir.ui.view">
			<field name="name">patient.hospitalization.view.form.popup</field>
			<field name="model">patient.hospitalization</field>
			<field name="priority">20</field>
			<field name="arch" type="xml">
				<form>					<!---->
					<header>
						<button name="action_admit" states="draft" string="Admit" type="object" class="oe_highlight"/>
						<button name="action_discharge" states="admit" string="Discharge" type="object" class="oe_highlight"/>
						<button name="action_create_invoice" states="discharge" string="Create Invoice" type="object" class="oe_highlight"/>
						<field name="state" readonly="1" widget="statusbar"/>
					</header>
					<sheet>
						<div class="oe_title">
							<h1>
								<field name="name" readonly="1"/>
							</h1>
						</div>
						<group>
							<group>
								<field name="partner_id" attrs="{'readonly': [('state', 'in', ['discharge','invoice'])]}" required="1" domain="[('is_patient','=', True)]" options="{'no_open': True, 'no_create': True}"/>
								<field name="registration_no" attrs="{'readonly': [('state', 'in', ['discharge','invoice'])]}"/>
								<field name="admit_date" readonly="1"/>
								<field name="partner_id" attrs="{'readonly': [('state', 'in', ['discharge','invoice'])]}" required="1" domain="[('partner_type_id','=', 'doctor')]" options="{'no_open': True, 'no_create': True}"/>
								<field name="disease_type_id" attrs="{'readonly': [('state', 'in', ['discharge','invoice'])]}" options="{'no_open': True, 'no_create': True}"/>

							</group>
							<group>
								<field name="ward_id" required="1" attrs="{'readonly': [('state', 'in', ['discharge','invoice'])]}" options="{'no_open': True, 'no_create': True}"/>
								<field name="bed_id" required="1" domain="[('state', '=', 'free'),('ward_id', '=', ward_id)]" attrs="{'readonly': [('state', 'in', ['discharge','invoice'])]}" options="{'no_open': True, 'no_create': True}"/>
								<field name="discharge_date" readonly="1"/>
								<field name="operating_id" attrs="{'readonly': [('state', 'in', ['discharge','invoice'])]}" domain="[('partner_type_id','=', 'doctor')]" options="{'no_open': True, 'no_create': True}"/>
								<field name="invoice_id" readonly="1"/>
							</group>
						</group>
						<notebook>
							<page string="Note">
								<field name="note" attrs="{'readonly': [('state', 'in', ['discharge','invoice'])]}"/>
							</page>
						</notebook>
						<group class="oe_subtotal_footer">
							<field name="fees" readonly="1"/>
							<field name="bed_charge" readonly="1"/>
							<field name="other_charge" readonly="1"/>
							<field name="discount" readonly="1"/>
							<field name="total_fees" class="oe_subtotal_footer_separator"/>
						</group>

					</sheet>
					<div class="oe_chatter">
						<field name="message_follower_ids" widget="mail_followers" groups="base.group_user"/>
						<field name="activity_ids" widget="mail_activity"/>
						<field name="message_ids" widget="mail_thread"/>
					</div>
				</form>
			</field>
		</record>
		<!---->
		<record id="patient_hospitalization_view_search_new" model="ir.ui.view">
			<field name="name">patient.hospitalization.view.search</field>
			<field name="model">patient.hospitalization</field>
			<field name="arch" type="xml">
				<search string="Activity">
					<field name="partner_id"/>
					<field name="registration_no"/>
					<field name="disease_type_id"/>
					<field name="partner_id"/>
					<field name="operating_id"/>
					<field name="admit_date"/>
					<field name="discharge_date"/>
					<field name="state"/>
					<group expand="0" string="Group By">
						<filter string="Disease Type" name="disease_type_id" context="{'group_by': 'disease_type_id'}"/>
						<filter string="Patient" name="partner_id" context="{'group_by': 'partner_id'}"/>
						<filter string="Attending Doctor" name="partner_id" context="{'group_by': 'partner_id'}"/>
						<filter string="Operating Doctor" name="operating_id" context="{'group_by': 'operating_id'}"/>
						<filter string="State" name="state" context="{'group_by': 'state'}"/>
					</group>
				</search>
			</field>
		</record>
		<!---->
		<!---->
		<!---->
		<record id="patient_hospitalization_kanban_view" model="ir.ui.view">
			<field name="name">appointment.kanban.view</field>
			<field name="model">patient.hospitalization</field>
			<field name="arch" type="xml">
				<kanban class="o_res_partner_kanban">
					<field name="partner_id"/>
					<field name="registration_no"/>
					<field name="disease_type_id"/>
					<field name="partner_id"/>
					<field name="operating_id"/>
					<field name="admit_date"/>
					<field name="discharge_date"/>
					<field name="state"/>
					<templates>
						<t t-name="kanban-box">
							<div class="oe_kanban_global_click">
								<div class="oe_kanban_details">
									<strong class="o_kanban_record_title">
										<div>
											<strong>
												<field name="partner_id"/>
-</strong>
											<field name="registration_no"/>
										</div>
										<div>
											<strong>
												<field name="disease_type_id"/>
											</strong>
										</div>
										<div>
													Attending:<field name="partner_id"/>
,Operating:<field name="operating_id"/>
									</div>
									<div>
													Admit:<field name="admit_date"/>
, Discharge:<field name="discharge_date"/>
								</div>

							</strong>
						</div>
					</div>
				</t>
			</templates>
		</kanban>
	</field>
</record>

<record id="action_patient_hospitalization" model="ir.actions.act_window">
	<field name="name">Hospitalization(Admit)</field>
	<field name="type">ir.actions.act_window</field>
	<field name="res_model">patient.hospitalization</field>
	<!--			<field name="domain">[('user_id', '=', uid)]</field>-->
	<field name="view_mode">tree,kanban,search,form</field>
</record>


<!---->
<menuitem id="menu_patient_hospitalization" name='Hospitalization(Admit)' parent="main_menu_hospitalization" action="action_patient_hospitalization" sequence="3" />

</data>
</odoo>

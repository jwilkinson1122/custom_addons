<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <record id="medical_prescription" model="ir.ui.view">
            <field name="name">Medical Prescription</field>
            <field name="model">medical.prescription</field>
            <field name="arch" type="xml">
                <form>
                    <header>
                        <!-- <field name="state" widget="statusbar" statusbar_visible="Draft,Confirm"/>
                        <button name="confirm_request" type="object" string="Confirm" class="oe_highlight" states="Draft"/> -->
                        <field name="state" invisible="True" />
                        <button name="button_done" type="object" string="Done" attrs="{'invisible': [('state', 'in', ['new', 'done', 'cancel'])]}" states="open" class="oe_highlight" />
                        <field name="stage_id" widget="statusbar" options="{'clickable': True, 'fold_field': 'fold'}" />
                        <button name="confirm_request" type="object" string="Confirm" class="oe_highlight" states="Draft" />
                        <button name="open_customer" class="oe_highlight" states="Confirm" string="Create Sale Order" type="object"></button>
                        <button name="print_prescription_report_ticket_size" class="oe_highlight" string="Print Measure" type="object"></button>
                        <button name="print_ophtalmologic_prescription_report_ticket_size" class="oe_highlight" string="Print Ophtalmologic" type="object"></button>
                    </header>
                    <div class="oe_title">
                        <h1>
                            <field name="name"/>
                        </h1>
                    </div>
                    <group>
                        <group>
                            <field name="doctor_id" attrs="{'readonly': [('state','=','confirm')]}" options='{"no_open": True, "no_create": True}' required="1"/>
                            <field name="customer" domain="[('company_id', '=', False)]" attrs="{'readonly': [('state','=','confirm')]}" required="1"/>
                            <field name="company_id"/>
                            <field name="eye_examination_chargeable" attrs="{'readonly': [('state','=','confirm')]}" String="Examination" required="1"/>

                        </group>
                        <group>
                            <field name="prescription_date" attrs="{'readonly': [('state','=','confirm')]}" string="Prescription Date" required="1"/>
                            <field name="test_type" attrs="{'readonly': [('state','=','confirm')]}" options='{"no_open": True, "no_create": True}' required="1"/>
                            <field name="prescription_type" attrs="{'readonly': [('state','=','confirm')]}" required="1"/>
                        </group>
                    </group>
                    <notebook>
                        <page string="Measures">
                            <table cellspacing="0" cellpadding="0" style="border:1px solid; width:100% ">
                                <tr>
                                    <td rowspan="2" style="text-align:center; padding:5px; font-size:14px; font-weight:bold; width:7%; border-right:1px solid black; border-bottom:1px solid black;"></td>
                                    <td style="text-align:center; padding:5px; font-size:14px; font-weight:bold; width:40%; border-right:1px solid black; border-bottom:1px solid black;">
                                        FAR VISION
                                    </td>
                                </tr>
                                <tr>
                                    <td style="text-align:center;  font-size:12px; font-weight:bold; width:30%; border-right:1px solid black; border-bottom:1px solid black; font: Helvetica;">
                                        <table width="100%">
                                            <tr>
                                                <td style="border-right:1px solid; width:10%">SPH</td>
                                                <td style="border-right:1px solid; width:10%">CYL</td>
                                                <td style="border-right:1px solid; width:10%">AXIS</td>
                                                <td style="border-right:1px solid; width:10%">A.V</td>
                                                <td style="border-right:1px solid; width:10%">PUPILLARY DISTANCE</td>
                                                <td style="border-right:1px solid; width:10%">PRISM</td>
                                                <td style="border-right:1px solid; width:10%">ADD</td>
                                                <td style="width:10%">MEDIUM ADDITION</td>
                                            </tr>
                                        </table>
                                    </td>
                                </tr>
                                <tr>
                                    <td style="text-align:center; font-size:12px; font-weight:bold; width:5%; border-right:1px solid black; border-bottom:1px solid black;">
                                        RIGHT EYE
                                    </td>
                                    <td style="text-align:center;  font-size:12px; font-weight:bold; width:30%;">
                                        <table width="100%">
                                            <tr>
                                                <td style="border-right:1px solid; border-bottom:1px solid; height:25px; width:10%">
                                                    <span>
                                                        <field attrs="{'readonly': [('state','=','confirm')]}" name="od_sph_distance"/>
                                                    </span>
                                                </td>
                                                <td t-if="od_cyl_distance" style="border-right:1px solid; width:10%; border-bottom:1px solid;">
                                                    <field attrs="{'readonly': [('state','=','confirm')]}" name="od_cyl_distance"/>
                                                </td>
                                                <td style="border-right:1px solid; width:10%; border-bottom:1px solid;">
                                                    <field attrs="{'readonly': [('state','=','confirm')]}" name="od_ax_distance"/>
                                                </td>
                                                <td style="border-right:1px solid; width:10%; border-bottom:1px solid;">
                                                    <field attrs="{'readonly': [('state','=','confirm')]}" name="od_av_distance"/>
                                                </td>
                                                <td style="border-right:1px solid; width:10%;">
                                                    <field attrs="{'readonly': [('state','=','confirm')]}" name="od_pupillary_distance"/>
                                                </td>
                                                <td style="border-right:1px solid; width:10%; border-bottom:1px solid;">
                                                    <field attrs="{'readonly': [('state','=','confirm')]}" name="od_prism_distance"/>
                                                </td>
                                                <td style="border-right:1px solid; width:10%; border-bottom:1px solid;">
                                                    <field attrs="{'readonly': [('state','=','confirm')]}" name="od_add_distance"/>
                                                </td>
                                                <td style=" width:10%; border-bottom:1px solid;">
                                                    <field attrs="{'readonly': [('state','=','confirm')]}" name="od_base_distance"/>
                                                </td>
                                            </tr>
                                        </table>
                                    </td>
                                </tr>

                                <tr>
                                    <td style="text-align:center; font-size:12px; font-weight:bold; width:7%; border-right:1px solid black; border-bottom:1px solid black;">
                                        LEFT EYE
                                    </td>
                                    <td style="text-align:center;  font-size:12px; font-weight:bold; width:30%; border-right:1px solid black; border-bottom:1px solid black;">
                                        <table width="100%">
                                            <tr>
                                                <td style="border-right:1px solid;  height:25px; width:10%">
                                                    <span>
                                                        <field attrs="{'readonly': [('state','=','confirm')]}" name="os_sph_distance"/>
                                                    </span>
                                                </td>
                                                <td t-if="od_cyl_distance" style="border-right:1px solid; width:10%">
                                                    <field attrs="{'readonly': [('state','=','confirm')]}" name="os_cyl_distance"/>
                                                </td>
                                                <td style="border-right:1px solid; width:10%">
                                                    <field attrs="{'readonly': [('state','=','confirm')]}" name="os_ax_distance"/>
                                                </td>
                                                <td style="border-right:1px solid; width:10%">
                                                    <field attrs="{'readonly': [('state','=','confirm')]}" name="os_av_distance"/>
                                                </td>
                                                <td style="border-right:1px solid; width:10%">
                                                </td>
                                                <td style="border-right:1px solid; width:10%">
                                                    <field attrs="{'readonly': [('state','=','confirm')]}" name="os_prism_distance"/>
                                                </td>
                                                <td style="border-right:1px solid; width:10%">
                                                    <field attrs="{'readonly': [('state','=','confirm')]}" name="os_add_distance"/>
                                                </td>
                                                <td style=" width:10%">
                                                    <field attrs="{'readonly': [('state','=','confirm')]}" name="os_base_distance"/>
                                                </td>
                                            </tr>
                                        </table>
                                    </td>

                                </tr>
                            </table>
                            <table cellspacing="0" cellpadding="0" style="border:1px solid; width:100%; margin-top:10px; ">
                                <tr>
                                    <td rowspan="2" style="text-align:center; padding:5px; font-size:12px; font-weight:bold; width:7%; border-right:1px solid black; border-bottom:1px solid black;"></td>
                                    <td style="text-align:center; padding:5px; font-size:12px; font-weight:bold; width:40%; border-right:1px solid black; border-bottom:1px solid black;">
                                        CLOSE VISION
                                    </td>
                                </tr>
                                <tr>
                                    <td style="text-align:center;font-size:12px; font-weight:bold; width:5%; border-right:1px solid black;">
                                        <table width="100%">
                                            <tr>
                                                <td style="border-right:1px solid; width:10%; border-bottom:1px solid black;">
                                                    SPH
                                                </td>
                                                <td style="border-right:1px solid; width:10%; border-bottom:1px solid black;">
                                                    CYL
                                                </td>
                                                <td style="border-right:1px solid; width:10%; border-bottom:1px solid black;">
                                                    AXIS
                                                </td>
                                                <td style="border-right:1px solid; width:10%; border-bottom:1px solid black;">
                                                    A.V
                                                </td>
                                                <td style="border-right:1px solid; width:10%; border-bottom:1px solid black;">
                                                    PUPILLARY DISTANCE
                                                </td>
                                                <td style="border-right:1px solid; width:10%; border-bottom:1px solid black;">
                                                    PRISM
                                                </td>
                                                <td style="border-right:1px solid; width:10%;"></td>
                                                <td style="width:10%; border-bottom:1px solid black;">MEDIUM ADDITION
                                                </td>
                                            </tr>
                                        </table>
                                    </td>
                                </tr>

                                <tr>
                                    <td style="text-align:center; font-size:12px; font-weight:bold; width:5%; border-right:1px solid black; border-bottom:1px solid black;">
                                        RIGHT EYE
                                    </td>
                                    <td style="text-align:center;  font-size:12px; font-weight:bold; width:40%;">
                                        <table cellspacing="0" cellpadding="0" width="100%">
                                            <tr>
                                                <td style="border-right:1px solid; border-bottom:1px solid; height:25px; width:10%">
                                                    <field attrs="{'readonly': [('state','=','confirm')]}" name="od_sph_near"/>
                                                </td>
                                                <td style="border-right:1px solid; width:10%; border-bottom:1px solid;">
                                                    <field attrs="{'readonly': [('state','=','confirm')]}" name="od_cyl_near"/>
                                                </td>
                                                <td style="border-right:1px solid; width:10%; border-bottom:1px solid;">
                                                    <field attrs="{'readonly': [('state','=','confirm')]}" name="od_ax_near"/>
                                                </td>
                                                <td style="border-right:1px solid; width:10%; border-bottom:1px solid;">
                                                    <field attrs="{'readonly': [('state','=','confirm')]}" name="od_av_near"/>
                                                </td>
                                                <td style="border-right:1px solid; width:10%;">
                                                    <field attrs="{'readonly': [('state','=','confirm')]}" name="od_pupillary_near"/>
                                                </td>
                                                <td style="border-right:1px solid; width:10%; border-bottom:1px solid;">
                                                    <field attrs="{'readonly': [('state','=','confirm')]}" name="od_prism_near"/>
                                                </td>
                                                <td style="border-right:1px solid; width:10%;">

                                                </td>
                                                <td style="width:10%; border-bottom:1px solid;">
                                                    <field name="od_base_near"/>
                                                </td>
                                            </tr>
                                        </table>
                                    </td>
                                </tr>
                                <tr>
                                    <td style="text-align:center; font-size:12px; font-weight:bold; width:7%; border-right:1px solid black; border-bottom:1px solid black;">
                                        LEFT EYE
                                    </td>
                                    <td style="text-align:center;  font-size:12px; font-weight:bold; width:40%; border-right:1px solid black; border-bottom:1px solid black;">
                                        <table width="100%">
                                            <tr>
                                                <td style="border-right:1px solid;  height:25px; width:10%">
                                                    <field attrs="{'readonly': [('state','=','confirm')]}" name="os_sph_near"/>
                                                </td>
                                                <td style="border-right:1px solid; width:10%">
                                                    <field attrs="{'readonly': [('state','=','confirm')]}" name="os_cyl_near"/>
                                                </td>
                                                <td style="border-right:1px solid; width:10%">
                                                    <span>
                                                        <field attrs="{'readonly': [('state','=','confirm')]}" name="os_ax_near"/>
                                                    </span>
                                                </td>
                                                <td style="border-right:1px solid; width:10%">
                                                    <field attrs="{'readonly': [('state','=','confirm')]}" name="os_av_near"/>
                                                </td>
                                                <td style="border-right:1px solid; width:10%">
                                                    <field attrs="{'readonly': [('state','=','confirm')]}" name="os_pupillary_near"/>
                                                </td>
                                                <td style="border-right:1px solid; width:10%">
                                                    <field attrs="{'readonly': [('state','=','confirm')]}" name="os_prism_near"/>
                                                </td>
                                                <td style="border-right:1px solid; width:10%">

                                                </td>
                                                <td style="width:10%">
                                                    <field attrs="{'readonly': [('state','=','confirm')]}" name="os_base_near"/>
                                                </td>
                                            </tr>
                                        </table>
                                    </td>
                                </tr>
                            </table>
                            <group>
                                <group>
                                    <field name="family_eye_history" attrs="{'readonly': [('state','=','confirm')]}" string="Family Eye History"/>
                                    <field name="ocular_history" attrs="{'readonly': [('state','=','confirm')]}" string="Ocular History"/>
                                    <field name="consultation" attrs="{'readonly': [('state','=','confirm')]}" string="Consultation Reason"/>

                                </group>
                                <group>
                                    <field attrs="{'readonly': [('state','=','confirm')]}" name="diagnosis_client"></field>
                                    <field attrs="{'readonly': [('state','=','confirm')]}" name="notes_laboratory"></field>
                                    <field attrs="{'readonly': [('state','=','confirm')]}" name="doctor_notes" placeholder="Note"></field>
                                </group>
                            </group>
                        </page>
                        <page string="Podiatry">
                            <div class="row">
                                <div class="col-8">
                                    <table cellspacing="0" cellpadding="0" style="border:1px solid; width:100% ">
                                        <thead>
                                            <tr>
                                                <th rowspan="2" style="width:30%; border:1px solid black;"></th>
                                                <th colspan="2" style="text-align:center; border:1px solid black;">With
                                                    Correction
                                                </th>
                                                <th colspan="2" style="text-align:center; border:1px solid black;">
                                                    Without Correction
                                                </th>
                                            </tr>
                                            <tr>
                                                <th colspan="1" style="text-align:center; border:1px solid black;">Far
                                                </th>
                                                <th colspan="1" style="text-align:center; border:1px solid black;">
                                                    Close
                                                </th>
                                                <th colspan="1" style="text-align:center; border:1px solid black;">Far
                                                </th>
                                                <th colspan="1" style="text-align:center; border:1px solid black;">
                                                    Close
                                                </th>
                                                <th style="text-align:center; border:1px solid black;">Tonometria</th>
                                            </tr>
                                            <tr>
                                                <th style="border:1px solid black; text-align:center;">Right
                                                    Eye
                                                </th>
                                                <td style="border:1px solid black; text-align:center;">
                                                    <field name="r_wc_far"/>
                                                </td>
                                                <td style="border:1px solid black; text-align:center;">
                                                    <field name="r_wc_close"/>
                                                </td>
                                                <td style="border:1px solid black; text-align:center;">
                                                    <field name="r_woc_far"/>
                                                </td>
                                                <td style="border:1px solid black; text-align:center;">
                                                    <field name="r_woc_close"/>
                                                </td>
                                                <td style="border:1px solid black; text-align:center;">
                                                    <field name="r_tonometria"/>
                                                </td>
                                            </tr>
                                            <tr>
                                                <th style="border:1px solid black; text-align:center;">Left
                                                    Eye
                                                </th>
                                                <td style="border:1px solid black; text-align:center;">
                                                    <field name="l_wc_far"/>
                                                </td>
                                                <td style="border:1px solid black; text-align:center;">
                                                    <field name="l_wc_close"/>
                                                </td>
                                                <td style="border:1px solid black; text-align:center;">
                                                    <field name="l_woc_far"/>
                                                </td>
                                                <td style="border:1px solid black; text-align:center;">
                                                    <field name="l_woc_close"/>
                                                </td>
                                                <td style="border:1px solid black; text-align:center;">
                                                    <field name="l_tonometria"/>
                                                </td>
                                            </tr>
                                            <tr>
                                                <th style="border:1px solid black; text-align:center;">A/D</th>
                                                <td style="border:1px solid black; text-align:center;">
                                                    <field name="ad_wc_far"/>
                                                </td>
                                                <td style="border:1px solid black; text-align:center;">
                                                    <field name="ad_wc_close"/>
                                                </td>
                                                <td style="border:1px solid black; text-align:center;">
                                                    <field name="ad_woc_far"/>
                                                </td>
                                                <td style="border:1px solid black; text-align:center;">
                                                    <field name="ad_woc_close"/>
                                                </td>
                                                <td style="border:1px solid black; text-align:center;">
                                                    <field name="ad_tonometria"/>
                                                </td>
                                            </tr>
                                        </thead>
                                    </table>
                                </div>
                                <div class="col-4">
                                    <table cellspacing="0" cellpadding="0" style="border:1px solid; width:100% ">
                                        <thead>
                                            <tr>
                                                <th style="text-align:center; border:1px solid black; width:50%;">PH
                                                </th>
                                                <th style="text-align:center; border:1px solid black; width:50%;">CIE
                                                    10
                                                </th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td style="text-align:center; border:1px solid black; width:50%;">
                                                    <field name="ph"/>
                                                </td>
                                                <td style="text-align:center; border:1px solid black; width:50%;">
                                                    <field name="cie_10"/>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <group>
                                <group>
                                    <field name="main_symptoms"/>
                                    <field name="opthalmological_exam"/>
                                    <field name="other_exams"/>
                                </group>
                                <group>
                                    <field name="background"/>
                                    <field name="treatment"/>
                                    <field name="observations"/>
                                </group>
                            </group>
                        </page>
                        <page string="Prescription Testing">
                            <group string="Presc Lines">
                                <field name="prescription_line" nolabel="1" widget="one2many_list" />
                            </group>
                        </page>
                        <page string="Documents">
                            <group name="photo_group_tlOo2">
                                <group name="photo_group_tlOo2_left">
                                    <field widget="image" options='{"size": [0, 150]}' name="foot_image1" string="Left Image" />
                                </group>
                                <group name="photo_group_tlOo2_right">
                                    <field widget="image" options='{"size": [0, 150]}' name="foot_image2" string="Right Image" />
                                </group>
                            </group>
                            <group name="obj_group_DPydw">
                                <group name="obj_group_DPydw_left">
                                    <field name="left_obj_model" string="Left Scan" />

                                </group>
                                <group name="obj_group_DPydw_right">
                                    <field name="right_obj_model" string="Right Scan" />
                                </group>
                            </group>
                            <group string="Rx Attachement">
                                <field name="attachment_ids" widget="many2many_binary" class="oe_inline"/>
                            </group>
                        </page>
                        <page string="Special Instructions">

                        </page>
                        <page string="Casting">

                        </page>
                        <page string="Process">

                        </page>


                    </notebook>
                    <br/>
                    <br/>

                    <div class="oe_chatter">
                        <!-- <field name="message_follower_ids" widget="mail_followers" /> -->
                        <!-- <field name="activity_ids" widget="mail_activity" />
                        <field name="message_ids" widget="mail_thread" /> -->
                    </div>

                </form>
            </field>
        </record>


        <record id="medical_prescription_tree" model="ir.ui.view">
            <field name="name">Medical Prescription Tree View</field>
            <field name="model">medical.prescription</field>
            <field name="arch" type="xml">
                <tree decoration-muted="state in ['done', 'cancel']" decoration-bf="state=='open'">
                    <header>
                        <button type="action" name="%(action_prescription_message)d" string="Send Messages" />
                    </header>
                    <field name="state" invisible="True" />
                    <field name="doctor_id"/>
                    <field name="stage_id" />
                    <field name="patient_id"/>
                    <field name="customer"/>
                    <field name="prescription_date" string="Prescription Date"/>
                    <field name="test_type"/>
                    <field name="prescription_type"/>
                    <button name="print_prescription_report_ticket_size" class="oe_highlight" string="Print Measure" type="object"></button>
                    <button name="print_ophtalmologic_prescription_report_ticket_size" class="oe_highlight" string="Print Ophtalmologic" type="object"></button>
                </tree>
            </field>
        </record>

        <!-- Search -->
        <record id="medical_prescription_filter" model="ir.ui.view">
            <field name="model">medical.prescription</field>
            <field name="arch" type="xml">
                <search>
                    <field name="name" />
                    <field name="stage_id"/>
                    <!-- <field name="doctor_id" /> -->
                    <field name="user_id" />

                    <filter name="filter_not_done" string="To Return" domain="[('state','=','open')]" />
                    <filter name="filter_my_prescriptions" string="My Prescriptions" domain="[('user_id','=',uid)]" />
                    <filter name="group_user" string="By Practitioner" context="{'group_by': 'doctor_id'}" />

                    <searchpanel>
                        <!-- <field name="doctor_id" enable_counters="1" /> -->
                        <field name="stage_id" select="multi" />
                    </searchpanel>

                </search>

            </field>
        </record>

        <!-- Calendar View -->
        <record id="view_medical_prescription_calendar" model="ir.ui.view">
            <field name="name">Practitioner Prescriptions</field>
            <field name="model">medical.prescription</field>
            <field eval="2" name="priority" />
            <field name="arch" type="xml">
                <calendar date_start="date" string="orders" mode="month" color="color">
                    <field name="stage_id" type="col" />
                    <field name="patient_id" />
                    <field name="doctor_id" />
                    <field name="date" />
                </calendar>
            </field>
        </record>

        <!-- Pivot View -->
        <record id="view_medical_prescription_pivot" model="ir.ui.view">
            <field name="model">medical.prescription</field>
            <field name="arch" type="xml">
                <pivot>
                    <field name="stage_id" type="col" />
                    <field name="doctor_id" />
                    <field name="request_date" interval="week" />
                    <field name="num_prescriptions" type="measure" />
                </pivot>
            </field>
        </record>

        <!-- Graph View -->
        <record id="view_medical_prescription_graph" model="ir.ui.view">
            <field name="model">medical.prescription</field>
            <field name="arch" type="xml">
                <graph type="bar">
                    <field name="stage_id" />
                    <field name="num_prescriptions" type="measure" />
                </graph>
            </field>
        </record>


        <record id="action_prescription_window" model="ir.actions.act_window">
            <field name="name">Prescription</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">medical.prescription</field>
            <field name="view_mode">kanban,tree,form</field>
        </record>

        <record id="action_prescription_stages_window" model="ir.actions.act_window">
            <field name="name">Stages</field>
            <field name="res_model">medical.prescription.stage</field>
            <field name="view_mode">tree,form</field>
        </record>


        <menuitem id="podiatry_erp_root" name="Podiatry ERP" sequence="1" web_icon="podiatry_erp,static/description/icon.png"/>
        <menuitem id="podiatry_erp_practice" name="Accounts" parent="podiatry_erp_root" action="action_practice_window" groups="group_podiatry_erp_doctors,base.group_system" sequence="1"/>
        <menuitem id="podiatry_erp_doctor" name="Practitioner" parent="podiatry_erp_root" action="action_doctor_window" groups="group_podiatry_erp_doctors,base.group_system" sequence="2"/>
        <menuitem id="podiatry_erp_patient" name="Patients" parent="podiatry_erp_root" action="action_patient_window" groups="group_podiatry_erp_doctors,base.group_system" sequence="3"/>
        <menuitem id="podiatry_erp_sale_order" name="Sale Order" parent="podiatry_erp_root" action="sale.action_orders" sequence="6"/>
        <menuitem id="podiatry_erp_customer" name="Customer" parent="podiatry_erp_root" action="base.action_partner_customer_form" sequence="5"/>
        <menuitem id="podiatry_erp_config" name="Configuration" parent="podiatry_erp_root" sequence="7"/>
        <menuitem id="podiatry_erp_prescription" name="Prescription" parent="podiatry_erp_root" action="action_prescription_window" groups="group_podiatry_erp_doctors,base.group_system" sequence="4"/>
        <!-- <menuitem id="menu_configuration_stages" name="Stages" parent="menu_configuration" groups="group_manager" sequence="105" /> -->
        <menuitem id="podiatry_erp_prescription_stages" name="Stages" action="action_prescription_stages_window" parent="podiatry_erp.podiatry_erp_config" sequence="20"/>

    </data>
</odoo>

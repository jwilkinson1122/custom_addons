<?xml version="1.0" encoding="utf-8"?>

<template>


	<t t-name="ProductTemplatePopupWidget" owl="1">
		<div class="modal-dialog">
			<div class="popup popup-confirm" style="height: 450px;">
				<p class="title" style="background-color: #7f82ac; color: #fff;">Products Variants</p>
				<p style="color: #0075AC;">Select Your Variants</p>
				<div class="body" style="height: 300px; overflow  : auto">
					<div t-if="props.variant_ids.length != 0" class="product-list">
						<t t-foreach="props.variant_ids" t-as="product" t-key="product.id">
							<ProductProduct product="product"/>
						</t>
					</div>
				</div>
				<div class="footer" style="background-color: #7f82ac; color: #fff; bottom:-43px;">
					<div id="cancel" class="button cancel" style="color: #131212; background: white;" t-on-click="go_back_screen">
						Cancel 
					</div>
				</div>
			</div>
		</div>
	</t>

	<t t-name="ProductTemplate" t-inherit="point_of_sale.ProductItem" t-inherit-mode="extension" owl="1">

		<xpath expr="//span[hasclass('price-tag')]" position="replace">
			<span class="price-tag">
				<t t-if="props.product.product_variant_count > 1">
					<t t-esc="props.product.product_variant_count"/>
 Variants
				</t>
				<t t-else="">
					<t t-esc="price" />
				</t>
			</span>
		</xpath>
		<xpath expr="//div[hasclass('product-name')]" position="replace">
			<div class="product-name" t-attf-id="article_product_{{props.product.id}}">
				<t t-if="props.product.product_variant_count > 1">
					<t t-esc="props.product.template_name" />
				</t>
				<t t-else="">
					<t t-esc="props.product.display_name" />
				</t>
			</div>
		</xpath>
	</t>

	<t t-name="ProductTemplateListWidget" owl="1">
		<div class='product-list-container'>
			<div class="product-list-scroller touch-scrollable  scrollable-y">
				<div class="product-list">
				</div>
			</div>
			<span class="placeholder-ScrollbarWidget" />
		</div>
	</t>

	<t t-name="ProductProduct" owl="1">
		<article class="product" tabindex="0" t-on-click="trigger('click-product-template', props.product)" t-att-data-product-id="props.product.id" t-attf-aria-labelledby="article_product_{{props.product.id}}">
			<div class="product-img">
				<img t-att-src="imageUrl" t-att-alt="props.product.display_name" />
				<span class="price-tag">
					<t t-esc="price" />
				</span>
			</div>
			<div class="product-name" t-attf-id="article_product_{{props.product.id}}">
				<t t-esc="props.product.display_name" />
			</div>
		</article>
	</t>

	<t t-name="Orderline" t-inherit="point_of_sale.Orderline" t-inherit-mode="extension" owl="1">
		<xpath expr="//ul[hasclass('info-list')]" position="after">
			<ul>
				<li class="package_info" style="margin-left: 20px;font-size: 14px;">
					<t t-if="props.line.get_modifier()">
						<t t-foreach="props.line.get_modifier()" t-as="line">
							<t t-if="line.laterality_type == 'pair'">
								<span style="font-weight: bold;">
									<t t-esc="line.display_name" />
								</span>
								<span style="color:#888">
									<t t-esc="(line.qty).toFixed(2)"/>
									<t t-esc="line.uom_id[1]"/>
 (									<t t-esc="line.option"/>
)
									<br/>
								</span>
							</t>

							<t t-if="line.laterality_type == 'single'">
								<span style="font-weight: bold;">
									<t t-esc="line.display_name" />
								</span>
								<span style="color:#888">
									<t t-esc="(line.qty).toFixed(2)/2"/>
									<t t-esc="line.uom_id[1]"/>
 (									<t t-esc="line.option"/>
)
									<br/>
								</span>
							</t>

							<t t-if="line.is_sub">
								<span style="font-weight: bold;">
									<t t-esc="line.display_name" />
								</span>
								<span style="color:#888">
									<t t-esc="(line.qty)"/>
									<t t-esc="line.uom_id[1]"/>
									<br/>
								</span>

							</t>
						</t>
					</t>
				</li>
			</ul>
		</xpath>
	</t>


	<t t-name="ProductList" t-inherit="point_of_sale.ProductList" t-inherit-mode="extension" owl="1">
		<xpath expr="//div[hasclass('product-list-empty')]" position="after">
			<div class="modifiers-list" style="display:none;">
				<div class="screen-content">
					<t t-if="!env.isMobile">
						<div class="top-content">
							<div class="button back" t-on-click="closeModifierScreen">
								<i class="fa fa-angle-double-left fa-fw"></i>
								<span class="back_text">Cancel</span>
							</div>
							<h1 class="top-content-center">
								<span id="modifier-product-name">
								</span>
							</h1>
							<div class="button next highlight" t-on-click="doneModifier">
								<span class="next_text">Done</span>
								<i class="fa fa-angle-double-right fa-fw"></i>
							</div>
						</div>
					</t>
					<div class="main-content modifier-pair-content">
						<div style="left: 0px;width: 100%;height: 100%;display: table;border: none;overflow: hidden;text-align: center;">
							<div class="device_info">
								<p id="ask">How Would you modify your item??</p>
								<p style="display:none;" id="pair">You Selected Device Pair Please Choose Modifier.</p>
								<p style="display:none;" id="single">You Selected Single Device Please Choose Modifier For Left Single Or Right Single.</p>
							</div>


							<div id="device_types" style="clear: none;margin-right:220px;margin-top:12px">

								<div class="hiddenradio" style="width: 140%">
									<label>
										<input style="width: 30px;float: left;cursor: pointer" type="radio" class="radio" name="x" value="pair" id="y" t-on-click="pair"/>
										<img src="/podiatry_pos_modifier/static/src/img/pair.jpg" style="margin:14px;width:23%;border-radius: 120px" />
									</label>

									<label>
										<input style="width: 30px;float: left;" type="radio" class="radio" name="x" value="single" id="z" t-on-click="single"/>
										<img src="/podiatry_pos_modifier/static/src/img/single.jpg" style="margin:14px;width:23%;border-radius: 120px"/>
									</label>
								</div>

								<div id="single_device" style="float: right;clear: none;margin-right:35px;margin-top:12px;display:none;">
									<input checked="checked" style="width: 30px;float: left;" type="radio" class="radio" name="single" value="left single" id="left_single"/>
									<label id="for_left_single" style="font-size:18px;margin-top:-3px;float: left;clear: none;display: block;padding: 0px 1em 0px 8px;" for="left_single">Left Single</label>

									<input style="width: 30px;float: left;" type="radio" class="radio" name="single" value="right single" id="right_single"/>
									<label id="for_right_single" style="font-size:18px;margin-top:-3px;float: left;clear: none;display: block;padding: 0px 1em 0px 8px;" for="right_single">Right Single</label>
								</div>

								<br/>
								<br/>
								<br/>
								<div class="button modifiers-product-list" style=";border-top: dashed 1px gainsboro;width: 140%;display:none;">
									<t t-if="env.pos.modifier_attribute">
										<span class="button-modifier" t-foreach="env.pos.modifier_attribute" t-as="order" t-att-data-id="order.product_id[0]" style="margin:9px 6px;width: 140%">
											<button class="modiButton" style="margin:9px 6px;text-align: center;font-size: 19px !important;color: #555555;;padding: 10px 13px;border-radius: 3px;border: solid 1px rgb(209, 209, 209);cursor: pointer;font-weight: bold;" t-att-data-product-id="order.product_id[0]" t-on-click="modifierSelection">
												<t t-esc="order.display_name" />
											</button>
										</span>
									</t>
								</div>

							</div>

						</div>
					</div>
				</div>
			</div>
			<div class="side-prod-list" style="display:none">
				<div class="button_of_side" style="margin-left:185px">
					<button class="button-side" style="margin-top: 290px;width: 235px;margin-right: 5px;height: 43px;font-size: 19px;color: white;background: #6dc79a;border-radius: 10px;padding:5px" t-on-click="selectSubProduct">
						<i class='fa fa-angle-double-left'></i>
						Add Sub Product
					</button>
					<button class="button close-side-prod" style="height: 43px;width: 200px;border-radius: 10px;font-size: 19px;padding:5px;color:#555555" t-on-click="cancel_add_side_product">
						<i class='fa fa-angle-double-right'></i>
						Cancel
					</button>
				</div>
				<!-- <div class="side-prod-list"> -->

			</div>

			<div class="side-prod-info" style="text-align: left;display:none">


				<div class="screen-content">
					<t t-if="!env.isMobile">
						<div class="top-content">

							<h1 class="top-content-center">
			                	Select Sub Products
							</h1>
							<div class="button next highlight done-side-prod" t-on-click="doneSubProduct">
								<span class="next_text">Done</span>
								<i class="fa fa-angle-double-right fa-fw"></i>
							</div>
						</div>
					</t>
				</div>

				<t t-if="env.pos.side_prod_list">
					<div class="product-list-container">
						<div t-if="env.pos.side_prod_list.length != 0" class="product-list">
							<t t-foreach="env.pos.side_prod_list" t-as="product" t-key="product.id">
								<article class='product side-prod' t-att-data-product-id="product.id" tabindex="0" t-attf-aria-labelledby="article_product_#{product.id}" t-on-click="add_sub_product">
									<div class="product-img">
										<img t-att-src='product.image_url' alt="Product image"/>
										<span class="price-tag">
											<t t-esc="env.pos.format_currency(product.lst_price,'Product Price')+'/'+product.uom_id[1]"/>
										</span>
									</div>
									<div class="product-name" t-attf-id="article_product_#{product.id}">
										<t t-esc="product.display_name"/>
									</div>
								</article>
							</t>
						</div>
					</div>
				</t>
			</div>

		</xpath>
	</t>

	<t t-extend="OrderReceipt" t-inherit="point_of_sale.OrderReceipt" t-inherit-mode="extension" owl="1">
		<xpath expr="//div[hasclass('orderlines')]" position="replace">

			<!-- <t t-jquery="div[class*='orderlines']" t-operation="replace"> -->
			<div class="orderlines">
				<t t-foreach="receipt.orderlines" t-as="line" t-key="line.id">
					<t t-if="isSimple(line)">
						<div class="responsive-price">
							<t t-esc="line.product_name_wrapped[0]" />
							<span t-esc="env.pos.format_currency_no_symbol(line.price_display)" class="price_display pos-receipt-right-align"/>
						</div>

						<t t-if="line.is_modifier" style="margin-left:7px;font-size:14px">

							<div style="margin-left:7px;font-size:14px">
								<t t-foreach="line.is_modifier" t-as="modifier">
									<t t-if="modifier.laterality_type == 'pair'">
										<span>
											<t t-esc="modifier.display_name" />
										</span>
										<span style="color:#888">
											<t t-esc="(modifier.qty).toFixed(2)"/>
											<t t-esc="modifier.uom_id[1]"/>
 (											<t t-esc="modifier.option"/>
)
											<br/>
										</span>
									</t>

									<t t-if="modifier.laterality_type == 'single'">
										<span>
											<t t-esc="modifier.display_name" />
										</span>
										<span style="color:#888">
											<t t-esc="(modifier.qty).toFixed(2)/2"/>
											<t t-esc="modifier.uom_id[1]"/>
 (											<t t-esc="modifier.option"/>
)
											<br/>
										</span>
									</t>

									<t t-if="modifier.is_sub">
										<span>
											<t t-esc="modifier.display_name" />
										</span>
										<span style="color:#888">
											<t t-esc="(modifier.qty)"/>
											<t t-esc="modifier.uom_id[1]"/>
											<br/>
										</span>
									</t>
								</t>
							</div>
						</t>

						<WrappedProductNameLines line="line" />
					</t>
					<t t-else="">
						<div t-esc="line.product_name_wrapped[0]" />
						<t t-if="line.is_modifier" style="margin-left:7px;font-size:14px">

							<div style="margin-left:7px;font-size:14px">
								<t t-foreach="line.is_modifier" t-as="modifier">
									<t t-if="modifier.laterality_type == 'pair'">
										<span>
											<t t-esc="modifier.display_name" />
										</span>
										<span style="color:#888">
											<t t-esc="(modifier.qty).toFixed(2)"/>
											<t t-esc="modifier.uom_id[1]"/>
 (											<t t-esc="modifier.option"/>
)
											<br/>
										</span>
									</t>

									<t t-if="modifier.laterality_type == 'single'">
										<span>
											<t t-esc="modifier.display_name" />
										</span>
										<span style="color:#888">
											<t t-esc="(modifier.qty).toFixed(2)/2"/>
											<t t-esc="modifier.uom_id[1]"/>
 (											<t t-esc="modifier.option"/>
)
											<br/>
										</span>
									</t>

									<t t-if="modifier.is_sub">
										<span>
											<t t-esc="modifier.display_name" />
										</span>
										<span style="color:#888">
											<t t-esc="(modifier.qty)"/>
											<t t-esc="modifier.uom_id[1]"/>
											<br/>
										</span>
									</t>
								</t>
							</div>
						</t>
						<WrappedProductNameLines line="line" />
						<t t-if="line.display_discount_policy == 'without_discount' and line.price != line.price_lst">
							<div class="pos-receipt-left-padding">
								<t t-esc="env.pos.format_currency_no_symbol(line.price_lst)" />
                                ->
								<t t-esc="env.pos.format_currency_no_symbol(line.price)" />
							</div>
						</t>
						<t t-elif="line.discount !== 0">
							<div class="pos-receipt-left-padding">
								<t t-if="env.pos.config.iface_tax_included === 'total'">
									<t t-esc="env.pos.format_currency_no_symbol(line.price_with_tax_before_discount)"/>
								</t>
								<t t-else="">
									<t t-esc="env.pos.format_currency_no_symbol(line.price)"/>
								</t>
							</div>
						</t>
						<t t-if="line.discount !== 0">
							<div class="pos-receipt-left-padding">
                                Discount: <t t-esc="line.discount" />
%
							</div>
						</t>
						<div class="pos-receipt-left-padding">
							<t t-esc="Math.round(line.quantity * Math.pow(10, env.pos.dp['Product Unit of Measure'])) / Math.pow(10, env.pos.dp['Product Unit of Measure'])"/>
							<t t-if="!line.is_in_unit" t-esc="line.unit_name" />
                            x
							<t t-esc="env.pos.format_currency_no_symbol(line.price_display_one)" />
							<span class="price_display pos-receipt-right-align">
								<t t-esc="env.pos.format_currency_no_symbol(line.price_display)" />
							</span>
						</div>
					</t>
					<t t-if="line.pack_lot_lines">
						<div class="pos-receipt-left-padding">
							<ul>
								<t t-foreach="line.pack_lot_lines" t-as="lot" t-key="lot.cid">
									<li>
                                        SN <t t-esc="lot.attributes['lot_name']"/>
									</li>
								</t>
							</ul>
						</div>
					</t>
				</t>
			</div>
		</xpath>

	</t>
</template>

<?xml version="1.0" ?>
<odoo>
    <data>
    	<record id="bi_view_custom_field_saleorder_wizard" model="ir.ui.view">
            <field name="name">ir.models.fields.sale.form</field>
            <field name="model">ir.models.fields.sale</field>
            <field name="arch" type="xml">
                <form string="Fields">
                    <sheet>
                        <group col="4">
                            <field name="name"/>
                            <field name="field_description"/>
                            <field name="help"/>
                            <field name="ttype"/>
                            <field name="where_to_add"/>
							<field name="after_which_field_sale" widget="selection"/>
							<field name="selection_ids" attrs="{'required': [('ttype','in',['selection','reference'])], 'readonly': [('ttype','not in',['selection','reference'])], 'invisible': [('ttype','not in',['selection','reference'])]}">
                                <tree editable="bottom">
                                    <field name="value"/>
                                    <field name="name"/>
                                </tree>
                            </field> 
						   <field name="relation" attrs="{'required': [('ttype','in',['many2one','one2many','many2many'])], 'readonly': [('ttype','not in',['many2one','one2many','many2many'])], 'invisible': [('ttype','not in',['many2one','one2many','many2many'])]}"
                           />
                          <field name="state" invisible="1"/>    
                          <field name="relation_field" attrs="{'required': [('ttype','=','one2many')], 'readonly': [('ttype','!=','one2many')], 'invisible': [('ttype','!=','one2many')]}"/>
                        </group>
                        <footer>
                            <button name="custom_field_add" type="object" string="Add Custom Field" class="oe_highlight"/>
                            	or
                            <button string="Cancel"  special="cancel" class="oe_highlight"/>
                        </footer>
                    </sheet>
                </form>
            </field>
        </record>

        <record id="bi_action_open_custom_saleorder_field_wizard" model="ir.actions.act_window">
            <field name="name">Add custom fields</field>
            <field name="binding_view_types">form</field>
            <field name="view_mode">form</field>
            <field name="res_model">ir.models.fields.sale</field>
            <field name="target">new</field>
        </record>

        <record id="bi_inherited_button_sale_order_view" model="ir.ui.view">
            <field name="name">custom.sale_order.view</field>
            <field name="model">sale.order</field>
            <field name="inherit_id" ref="sale.view_order_form"/>
            <field name="arch" type="xml">
                <header  position="inside">
                 	<button name="%(bi_action_open_custom_saleorder_field_wizard)d" 
                    string="Add Custom Field" type="action" class="oe_stat_button"
                    groups="bi_add_custom_field_sales_order.group_system_custom_saleorder_field"/>
                 	</header>
            </field>
        </record>
     </data>

     <data noupdate="1">
        <record id="bi_inherit_sale_order_view" model="ir.ui.view">
            <field name="name">bi_inherit_sale_order_view</field>
            <field name="model">sale.order</field>
            <field name="inherit_id" ref="sale.view_order_form" />
            <field name="type">form</field>
            <field name="arch" type="xml">
                <field name="partner_id" position="after">
                    <field name="dummy" invisible="1" />
                </field>
            </field>
        </record>
     </data>
</odoo>

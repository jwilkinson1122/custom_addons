.. image:: https://img.shields.io/badge/licence-AGPL--3-blue.svg
   :target: http://www.gnu.org/licenses/agpl-3.0-standalone.html
   :alt: License: AGPL-3

============================================
Mgmtsystem Indicators Report Pdf2data Import
============================================

This addon allows to create a indicators report extracting the data from a pdf

Usage
=====

To use this module you have to add in the configuration file a field called "pdf2data_templates_dir". Here the yml templates will be saved.
For example I used:
pdf2data_templates_dir=/home/REINACB/alba.riera/demoextract/templates_pdf2data

It is also needed to write the model in which this template will be used in the field "issuer".

Here you have an example of a template to use:

.. code-block:: python

    issuer: mgmtsystem.indicators.report
    keywords:
    - TeleTest
    fields:
      report_id: Informe\s(\d{3,}v\d)
      name: Nombre\sMuestra\s+\#\s+(\w.+)
      sample_date: Fecha\sToma\sMuestra\s+\#\s+Dia\s+(\d{2}/\d{2}/\d{2})
      date: Fecha\sValidacion\sy\sEmision\sInforme:\s+(\d{2}/\d{2}/\d{2})
      validation_partner: Informe\sValidado\spor\s(\w.+)\s+Jefe
    options:
      decimal_separator: ","
      remove_whitespace: False
      remove_accents: True
      date_formats:
        - '%d/%m/%Y'
    lines:
      start: Control\sHigienico
      end: Informe\sValidado\spor
      first_line: (?P<concept>Recuento\s.+)
      line: (?P<value>\d+,\d+)\s*u.f.c./\s*cm2\s+\(VR
      last_line: (?P<value>\d+,\d+)\s*u.f.c./\s*m3
      types:
        value: float
    required_fields:
    - issuer


To use this module first you have to define a template with its yml file. To do so go to:

EDI ->  Pdf2data templates

   a) Select the model you want to generate with this template ( for example Mgmtsystem indicators report)
   b) Copy and paste the template above (in the future the issuer field will be autogenerated with the field model)

Now you can import a PDF of the mgmtsystem.indicators.report model going to:

Settings -> Technical (add the permission to do so ) -> Pdf2dataimport -> Import PDF

a) Select the PDF anc click import
b) A indicator report will be generated with the PDF file

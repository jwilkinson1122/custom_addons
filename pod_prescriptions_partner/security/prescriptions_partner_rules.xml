<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <data noupdate="1">
        <!-- Refuse access to patient records that are not part of personnel user's partners -->
        <record id="restrict_partner_access_to_partner_patients" model="ir.rule">
            <field name="name">Restrict Partner Personnel Access to Their Patients Only</field>
            <field name="model_id" ref="model_prescriptions_patient"/>
            <field name="groups" eval="[(6, 0, [ref('base.group_portal')])]"/>
            <field name="domain_force">
                [('id', 'in',
                  user.partner_id.partner_personnel_rel_ids.prescriptions_partner_id.patient_ids.ids)]
            </field>
        </record>
    </data>
</odoo>

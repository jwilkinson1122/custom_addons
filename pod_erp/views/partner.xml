<?xml version="1.0" encoding="utf-8"?>
<odoo>
	<data>
		<record model="ir.ui.view" id="partner_view_form_inherit">
			<field name="name">partner.view.user</field>
			<field name="model">res.partner</field>
			<field eval="1" name="priority" />
			<field name="inherit_id" ref="base.view_partner_form" />
			<field name="arch" type="xml">
				<xpath expr="//field[@name='company_type']" position="attributes">
					<attribute name="invisible">True</attribute>
				</xpath>
				<!-- <xpath expr="//group" position="inside">
					<group>
						<field name="dob" string="Dob"></field>
						<field name="age" string="Age"></field>
					</group>
				</xpath> -->
				<xpath expr="//div[hasclass('oe_button_box')]" position="inside">
					<button name="create_sale_order_prescriptions" class="oe_stat_button" type="object" icon="fa-tasks">
						<field string="Prescription" name="prescription_count" widget="statinfo"/>
					</button>
				</xpath>
				<xpath expr="/form/sheet//div[hasclass('o_row')]/field[@name='parent_id']" position="attributes">
					<attribute name="attrs" />
				</xpath>
				<xpath expr='//page[@name="contact_addresses"]' position="before">
					<!-- <page string="Attributes">
						<group colspan="6" col="6">
							<field name="is_patient" />
							<field name="is_practitioner" />
							<field name="is_practice" />
						</group>
					</page> -->
					<page string="Practices" attrs="{'invisible': [('is_company','=',False)]}" autofocus="autofocus">
						<field name="practice_ids" context="{'default_parent_id': active_id, 'default_is_company': True, 'default_type':'other'}" mode="kanban">
							<kanban on_create="base.view_partner_form">
								<field name="id" />
								<field name="color" />
								<field name="name" />
								<field name="title" />
								<field name="type" />
								<field name="email" />
								<field name="parent_id" />
								<field name="is_company" />
								<field name="function" />
								<field name="phone" />
								<field name="street" />
								<field name="street2" />
								<field name="zip" />
								<field name="city" />
								<field name="country_id" />
								<field name="mobile" />
								<field name="state_id" />
								<field name="image_128" />
								<field name="lang" />
								<!-- fields in form x2many view to diminish requests -->
								<field name="comment" />
								<field name="display_name" />
								<templates>
									<t t-name="kanban-box">
										<t t-set="color" t-value="kanban_color(record.color.raw_value)" />
										<div t-att-class="color + (record.title.raw_value == 1 ? ' oe_kanban_color_alert' : '') + ' oe_kanban_global_click'">
											<div class="o_kanban_image">
												<img alt="Contact image" t-if="record.image_128.raw_value" t-att-src="kanban_image('res.partner', 'image_128', record.id.raw_value)" />
												<t t-if="!record.image_128.raw_value">
													<img alt="Delivery" t-if="record.type.raw_value === 'delivery'" t-att-src='_s + "/base/static/img/truck.png"'/>
													<img alt="Invoice" t-if="record.type.raw_value === 'invoice'" t-att-src='_s + "/base/static/img/money.png"'/>
													<t t-if="record.type.raw_value !== 'invoice' &amp;&amp; record.type.raw_value !== 'delivery'">
														<img alt="Logo" t-if="record.is_company.raw_value === true" t-att-src='_s + "/base/static/img/company_image.png"'/>
														<img alt="Avatar" t-if="record.is_company.raw_value === false" t-att-src='_s + "/base/static/img/avatar_grey.png"'/>
													</t>
												</t>
											</div>
											<div class="oe_kanban_details">
												<field name="name" />
												<div t-if="record.function.raw_value">
													<field name="function" />
												</div>
												<div t-if="record.email.raw_value">
													<field name="email" widget="email" />
												</div>
												<div t-if="record.type.raw_value != 'contact'">
													<div>
														<field name="zip" />
														<field name="city" />
													</div>
													<field t-if="record.state_id.raw_value" name="state_id" />
													<field name="country_id" />
												</div>
												<div t-if="record.phone.raw_value">Phone: <t t-esc="record.phone.value" />
												</div>
												<div t-if="record.mobile.raw_value">Mobile: <t t-esc="record.mobile.value" />
												</div>
											</div>
										</div>
									</t>
								</templates>
							</kanban>
						</field>
					</page>
				</xpath>
			</field>
		</record>

		<!--Action: Practices-->
		<!-- <record id="action_practice_window" model="ir.actions.act_window">
			<field name="name">Clinics</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">res.partner</field>
			<field name="view_mode">kanban,tree,form</field>
			<field name="view_id" eval="False"/>
			<field name="domain">[('is_company', '=', 1), ('is_practice', '=', 1)]</field>
			<field name="context">{'default_is_practice': 1,'search_default_is_practice': 1}</field>
			<field name="help" type="html">
				<p class="o_view_nocontent_smiling_face">
                Create a new practice
				</p>
				<p>
                Organize and manage practices at a glance.
				</p>
			</field>
		</record> -->

		<record id="action_practice_window" model="ir.actions.act_window">
			<field name="name">Clinics</field>
			<field name="res_model">res.partner</field>
			<field name="view_mode">kanban,tree,form</field>
			<field name="domain">[('is_company', '=', True)]</field>
			<field name="view_id" eval="False"/>
			<field name="context">{'default_is_company': 1,'search_default_is_company': 1}</field>
			<field name="help" type="html">
				<p class="o_view_nocontent_smiling_face">
                Create a new practice
				</p>
				<p>
                Organize and manage practices at a glance.
				</p>
			</field>
		</record>


	</data>
</odoo>

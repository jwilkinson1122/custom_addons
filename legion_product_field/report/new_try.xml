<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <template id="sale_invoice_report" inherit_id="account.report_invoice_document">
            <xpath expr="." position="replace">
                <t t-call="web.html_container">
                    <t t-call="web.external_layout">

                        <style>
                            table { border-collapse: collapse;
                            }
                            tr { font-size: 14px; padding:3px;
                            }
                            td, th {
                            border: 1px solid black;
                            }
                            tr, td {
                            font-size: 14px; padding:3px; border: 1px solid black;
                            }
                        </style>

                        <style>
                            .watermark {
                            position: absolute;
                            opacity: 0.25;
                            z-index: 1000;
                            transform: rotate(300deg);
                            -webkit-transform: rotate(300deg);
                            width: 150%;
                            }
                        </style>

                        <div class="watermark">
                            <img t-att-src="'/legion_product_field/static/src/img/water_mark.png'"
                                 height="70" width="370"/>
                        </div>


                        <div style="width: 100%;" class="text-center">
                            <h4>Invoice</h4>
                        </div>
                        <br/>
                        <div style="width: 100%; border-left: 1px solid black;">
                            <div style="width: 50%; float:left; padding:10px;">
                                <table>

                                    <strong>Customer Name :</strong>
                                    <span t-field="o.partner_id.name"/>
                                    <br/>

                                    <strong>Address :</strong>
                                    <span t-field="o.partner_id.street"/>
                                    <span t-field="o.partner_id.city"/>
                                    <br/>

                                    <strong>Licence No. :</strong>
                                    <span t-field="o.lice_number"/>
                                    <br/>

                                    <strong>Reference :</strong>
                                    <span t-field="o.ref"/>
                                    <br/>

                                </table>
                            </div>

                            <div style="width: 45%;float:right; padding:10px;">
                                <table>

                                    <strong>Invoice # :</strong>
                                    <span t-field="o.name"/>
                                    <br/>

                                    <strong>Cell # :</strong>
                                    <span t-field="o.partner_id.phone"/>
                                    <br/>

                                    <strong>Date :</strong>
                                    <span t-field="o.invoice_date"/>
                                    <br/>

                                </table>
                            </div>

                        </div>


                        <!-- Start main Product page-->
                        <div class="page">

                            <t t-set="display_discount" t-value="any([l.discount for l in o.invoice_line_ids])"/>
                            <table class="table table-sm o_main_table" name="invoice_line_table"
                                   style="margin-top:35px">
                                <thead class="text-left">
                                    <tr>

                                        <th name="th_item_count" class="text-center" style="border: 1px solid black">
                                            <span>Sr. #</span>
                                        </th>

                                        <t t-set="colspan" t-value="6"/>
                                        <th name="th_description" style="border: 1px solid black" class="text-center">
                                            <span>Product Name</span>
                                        </th>

                                        <th name="th_batch_number" style="border: 1px solid black"
                                            t-attf-class="text-center {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}">
                                            <span>Batch#</span>
                                        </th>

                                        <th name="th_exp_date" style="border: 1px solid black"
                                            t-attf-class="text-center {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}">
                                            <span>Exp.</span>
                                        </th>

                                        <th name="th_mrp" style="border: 1px solid black"
                                            t-attf-class="text-center {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}">
                                            <span>M.R.P</span>
                                        </th>

                                        <th name="th_qty" style="border: 1px solid black"
                                            t-attf-class="text-center {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}">
                                            <span>Qty.</span>
                                        </th>

                                        <th name="th_unit_price" style="border: 1px solid black"
                                            t-attf-class="text-center {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}">
                                            <span>Rate.</span>
                                        </th>

                                        <th name="th_amount" style="border: 1px solid black"
                                            t-attf-class="text-center {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}">
                                            <span>Amount</span>
                                        </th>

                                    </tr>
                                </thead>

                                <tbody class="invoice_tbody">
                                    <t t-set="item_count" t-value="1"/>
                                    <t t-set="current_subtotal" t-value="0"/>
                                    <t t-set="price_without_tax" t-value="0"/>
                                    <t t-set="total_qty" t-value="0"/>

                                    <t t-set="batch_number" t-value="0"/>
                                    <t t-set="mfg_date" t-value="0"/>
                                    <t t-set="exp_date" t-value="0"/>
                                    <t t-set="pack_size" t-value="0"/>
                                    <t t-set="mrp" t-value="0"/>

                                    <t t-set="total_rate_rs" t-value="0"/>
                                    <t t-set="price_with_tax" t-value="0"/>
                                    <t t-set="price_with_tax_temp" t-value="0"/>
                                    <t t-set="price_inclusive" t-value="0"/>
                                    <t t-set="total_amount" t-value="0"/>
                                    <t t-set="lines"
                                       t-value="o.invoice_line_ids"/>

                                    <t t-foreach="lines" t-as="line" style="border: 1px solid black">
                                        <t t-set="current_subtotal" t-value="current_subtotal + line.price_subtotal"
                                           groups="account.group_show_line_subtotals_tax_excluded"
                                        />
                                        <t t-set="current_subtotal" t-value="current_subtotal + line.price_total"
                                           groups="account.group_show_line_subtotals_tax_included"
                                        />


                                        <tr t-att-class="'bg-200 font-weight-bold o_line_section' if line.display_type == 'line_section' else 'font-italic o_line_note' if line.display_type == 'line_note' else ''"
                                            style="border: 1px solid black">
                                            <t t-if="not line.display_type"
                                               name="account_invoice_line_accountable">

                                                <td name="text-center item_count" class="text-center"
                                                    style="border: 1px solid black">
                                                    <span t-esc="item_count"/>
                                                    <t t-set="item_count" t-value="item_count + 1"/>
                                                </td>

                                                <td name="account_invoice_line_name" style="border: 1px solid black">
                                                    <span t-field="line.name" t-options="{'widget': 'text'}"/>
                                                </td>

                                                <td class="text-center o_batch_number" style="border: 1px solid black">
                                                    <span t-field="line.batch_number"/>
                                                </td>

                                                <td class="text-center o_exp_date" style="border: 1px solid black">
                                                    <span t-field="line.exp_date" t-options='{"format": "MM-yyyy"}'/>
                                                </td>

                                                <td class="text-center o_mrp" style="border: 1px solid black">
                                                    <span t-field="line.mrp"/>
                                                </td>

                                                <td class="text-center" style="border: 1px solid black">
                                                    <span t-field="line.quantity"/>
                                                    <span t-field="line.uom_id" groups="uom.group_uom"/>
                                                    <t t-set="total_qty"
                                                       t-value="total_qty + line.quantity"/>
                                                </td>

                                                <td t-attf-class="text-center {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}"
                                                    style="border: 1px solid black">
                                                    <span t-field="line.price_unit"/>
                                                </td>

                                                <td t-attf-class="text-center {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}"
                                                    style="border: 1px solid black">
                                                    <span t-field="line.price_subtotal"/>
                                                    <t t-set="total_rate_rs"
                                                       t-value="total_rate_rs + line.price_subtotal "/>
                                                </td>

                                            </t>

                                            <t t-if="line.display_type == 'line_section'">
                                                <td colspan="99">
                                                    <span t-field="line.name" t-options="{'widget': 'text'}"/>
                                                </td>
                                                <t t-set="current_section" t-value="line"/>
                                                <t t-set="current_subtotal" t-value="0"/>
                                            </t>

                                            <t t-if="line.display_type == 'line_note'">
                                                <td colspan="99">
                                                    <span t-field="line.name" t-options="{'widget': 'text'}"/>
                                                </td>
                                            </t>

                                        </tr>

                                        <t t-if="current_section and (line_last or lines[line_index+1].display_type == 'line_section')">
                                            <tr class="is-subtotal text-right">
                                                <td colspan="99">
                                                    <strong class="mr16">Subtotal</strong>
                                                    <span
                                                            t-esc="current_subtotal"
                                                            t-options='{"widget": "monetary", "display_currency": o.currency_id}'
                                                    />
                                                </td>
                                            </tr>
                                        </t>

                                    </t>

                                    <tr>
                                        <td style="border: none;">
                                            <strong>
                                                <span></span>
                                            </strong>
                                        </td>

                                        <td style="border: none;" class="text-right">
                                            <strong>
                                                <span>Total</span>
                                            </strong>
                                        </td>

                                        <td style="border: none;">
                                            <strong>
                                                <span></span>
                                            </strong>
                                        </td>

                                        <td style="border: none;">
                                            <strong>
                                                <span></span>
                                            </strong>
                                        </td>

                                        <td style="border: none;">
                                            <strong>
                                                <span></span>
                                            </strong>
                                        </td>

                                        <td style="border: none;">
                                            <strong>
                                                <span></span>
                                            </strong>
                                        </td>

                                        <td style="border: none;">
                                            <strong>
                                                <span></span>
                                            </strong>
                                        </td>

                                        <td style="border: 1px solid black" class="text-center">
                                            <strong>
                                                <span t-esc="total_rate_rs"
                                                      t-options="{'widget': 'monetary', 'display_currency': o.currency_id}"/>
                                            </strong>
                                        </td>

                                    </tr>
                                </tbody>
                            </table>

                            <!-- Total Section part-->
                            <div class="clearfix">
                                <div id="total">
                                    <div t-attf-class="#{'col-4' if report_type != 'html' else 'col-sm-3 col-md-3'} ml-auto">
                                        <table class="table table-sm"
                                               style="page-break-inside: avoid; border: 1px solid black;">

                                            <tr class="border-black o_subtotal" style="">
                                            </tr>

                                            <tr class="border-black o_subtotal" style="">
                                            </tr>

                                            <tr class="border-black o_total">

                                            </tr>
                                        </table>
                                    </div>
                                </div>
                            </div>

                            <br/>

                            <div style="width: 20%; float:right;">

                                <img class="img img-responsive;"
                                     t-att-src="'/legion_product_field/static/src/img/signature.jpeg'"
                                     height="60" width="100"/>

                                <br/>

                                <p style="font-size: 15px; font-weight: bold">
                                    &#160; &#160; &#160; Account
                                </p>

                            </div>

                            <br/>
                            <br/>
                            <br/>
                            <br/>

                            <div style="width: 100%;">
                                <p style="font-size: 11px;">
                                    <br></br>
                                    Note: No any stock return will be entertained after one month of invoice generation
                                    <br/>
                                    WARRANTY UNDER SECTION 23 (1) (i) OF THE DRUGS ACT 1976:
                                    <br/>
                                    (i) We Shifa ul Lateef in Pakistan carrying on business at House # 75s, Medical
                                    Town, Jati Umra Road, Lahore, Punjab a distributor/wholesaler / authorized agent of
                                    the drugs on this invoice, do hereby give this warranty that the drugs invoice as
                                    sold by us, do not contravene in any way the provision of Section 23 of the Drug Act
                                    1976. note:
                                    <br/>
                                    (ii) Warranty under Alternative Medicines &amp; Health Products (Enlistment) Rules,
                                    2014. [See Rule 10(3) &amp; (51)] We as the authorized distributors/agents and on
                                    behalf
                                    of the Principal Manufacturing Imports hereby give warrants that the supplied
                                    alternative medicines and health products mentioned herein do not contravene any
                                    provision of the prevailing DRAP Act and rules framed there under.
                                    <br/>
                                    1- This warranty does not apply to Unani, Homeopathic, Bio-Chemic Herbal and General
                                    item including syringes, medical disposables if any mentioned in this invoice.
                                    <br/>
                                    2- For Near Expiry Rems see must be informed 3 months prior to expiry.
                                    <br/>
                                    3- Ensure that you have received the stock according to printed quantities and
                                    values.
                                    <br/>
                                    -In case of any discrepancy, please inform us immediate otherwise we don't accept
                                    any
                                    responsibility afterwards.
                                    <br></br>
                                </p>
                                <br/>
                            </div>

                            <br/>

                            <div style="width:100%; height:20; background-color:#D3D3D3; padding:20px;"
                                 class="text-center">
                                <h4>
                                    Thank You !
                                </h4>
                            </div>

                        </div>
                        <div class="footer">
                            <div class="text-center" style="border-top: 1px solid black; width: 100%;">
                                <ul class="list-inline mb4">
                                    <li t-if="o.company_id.phone" class="list-inline-item">Phone:
                                        <span t-field="o.company_id.phone"/>
                                    </li>
                                    <li t-if="o.company_id.email" class="list-inline-item">Email:
                                        <span t-field="o.company_id.email"/>
                                    </li>
                                    <li t-if="o.company_id.website" class="list-inline-item">Company Registry:
                                        <span t-field="o.company_id.company_registry"/>
                                    </li>
                                </ul>

                                <div t-if="report_type == 'pdf'" class="text-muted">
                                    Page:
                                    <span class="page"/>
                                    /
                                    <span class="topage"/>
                                </div>
                            </div>
                        </div>

                    </t>
                </t>
            </xpath>
        </template>
    </data>
</odoo>
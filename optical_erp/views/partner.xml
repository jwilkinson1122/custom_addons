<?xml version="1.0" encoding="utf-8"?>
<odoo>
	<data>
		<record id="view_partner_simple_form_fax" model="ir.ui.view">
			<field name="name">Add fax on partner</field>
			<field name="model">res.partner</field>
			<field name="inherit_id" ref="base.view_partner_simple_form" />
			<field name="arch" type="xml">
				<field name="function" position="after">
					<field name="fax" placeholder="Fax..." />
				</field>
			</field>
		</record>
		<record id="view_res_partner_filter" model="ir.ui.view">
			<field name="name">partner.user.search</field>
			<field name="model">res.partner</field>
			<field name="inherit_id" ref="base.view_res_partner_filter"/>
			<field name="arch" type="xml">
				<field name="name" position="attributes">
					<attribute name="filter_domain">['|','|','|',('display_name','ilike',self),('ref','=',self), ('email','ilike',self)]</attribute>
				</field>
				<field name="name" position="after">
					<field name="ref"/>
				</field>
			</field>
		</record>
		<record model="ir.ui.view" id="partner_view_form_inherit">
			<field name="name">partner.view.user</field>
			<field name="model">res.partner</field>
			<field name="inherit_id" ref="base.view_partner_form" />
			<field name="arch" type="xml">
				<!-- <xpath expr="//group" position="inside">
					<group>
						<field name="dob" string="Dob"></field>
						<field name="age" string="Age"></field>
					</group>
				</xpath> -->
				<!-- <field name="parent_id" widget="res_partner_many2one" placeholder="Practice Name..." domain="[('is_company', '=', True)]" context="{'default_is_company': True, 'show_vat': True}" attrs="{'invisible': ['|', '&amp;', ('is_company','=', True),('parent_id', '=', False),('company_name', '!=', False),('company_name', '!=', '')], 'required': [('company_type', '=', 'person')]}"/> -->

				<xpath expr="//div[hasclass('oe_button_box')]" position="inside">
					<button name="open_customer_prescriptions" class="oe_stat_button" type="object" icon="fa-file-text-o">
						<field string="Prescriptions" name="prescription_count" widget="statinfo"/>
					</button>
				</xpath>
				<field name="title" position="after">
					<field name="ref"/>
				</field>
				<xpath expr="/form/sheet//div[hasclass('o_row')]/field[@name='parent_id']" position="attributes">
					<attribute name="attrs" />
				</xpath>
				<!-- <xpath expr="//field[@name='type']" position="attributes">
					<attribute name="attrs">{'invisible': [('is_company','=',False)], 'required': [('is_company', '=', False)]}</attribute>
				</xpath> -->
				<xpath expr="//span[@name='address_name']" position="replace">
					<span class="o_form_label o_td_label" name="clinic_address">
						<field name="type" attrs="{'invisible': [('is_company','=', False)], 'required': [('is_company','=', False)], 'readonly': [('user_ids', '!=', [])]}" class="font-weight-bold"/>
						<!-- <b attrs="{'invisible': [('is_company', '=', False)]}">Address</b> -->
					</span>
				</xpath>
				<field name="function" position="after">
					<field name="fax" placeholder="Fax..." widget="phone" />
				</field>
				<xpath expr="//field[@name='child_ids']/form//field[@name='mobile']" position="after">
					<field name="fax" placeholder="Fax..." widget="phone" />
				</xpath>
				<xpath expr='//page[@name="contact_addresses"]' position="before">
					<page string="Affiliates" attrs="{'invisible': [('is_company','=',False)]}" autofocus="autofocus">
						<field name="affiliate_ids" context="{'default_parent_id': active_id, 'default_is_company': True, 'default_type':'other'}" mode="kanban">
							<kanban on_create="base.view_partner_form">
								<field name="id" />
								<field name="color" />
								<field name="name" />
								<field name="title" />
								<field name="type" />
								<field name="email" />
								<field name="parent_id" />
								<field name="is_company" />
								<field name="function" />
								<field name="phone" />
								<field name="street" />
								<field name="street2" />
								<field name="zip" />
								<field name="city" />
								<field name="country_id" />
								<field name="mobile" />
								<field name="state_id" />
								<field name="image_128" />
								<field name="lang" />
								<field name="comment" />
								<field name="display_name" />
								<templates>
									<t t-name="kanban-box">
										<t t-set="color" t-value="kanban_color(record.color.raw_value)" />
										<div t-att-class="color + (record.title.raw_value == 1 ? ' oe_kanban_color_alert' : '') + ' oe_kanban_global_click'">
											<div class="o_kanban_image">
												<img alt="Contact image" t-if="record.image_128.raw_value" t-att-src="kanban_image('res.partner', 'image_128', record.id.raw_value)" />
												<t t-if="!record.image_128.raw_value">
													<img alt="Delivery" t-if="record.type.raw_value === 'delivery'" t-att-src='_s + "/base/static/img/truck.png"'/>
													<img alt="Invoice" t-if="record.type.raw_value === 'invoice'" t-att-src='_s + "/base/static/img/money.png"'/>
													<t t-if="record.type.raw_value !== 'invoice' &amp;&amp; record.type.raw_value !== 'delivery'">
														<img alt="Logo" t-if="record.is_company.raw_value === true" t-att-src='_s + "/base/static/img/company_image.png"'/>
														<img alt="Avatar" t-if="record.is_company.raw_value === false" t-att-src='_s + "/base/static/img/avatar_grey.png"'/>
													</t>
												</t>
											</div>
											<div class="oe_kanban_details">
												<field name="name" />
												<div t-if="record.function.raw_value">
													<field name="function" />
												</div>
												<div t-if="record.email.raw_value">
													<field name="email" widget="email" />
												</div>
												<div t-if="record.type.raw_value != 'contact'">
													<div>
														<field name="zip" />
														<field name="city" />
													</div>
													<field t-if="record.state_id.raw_value" name="state_id" />
													<field name="country_id" />
												</div>
												<div t-if="record.phone.raw_value">Phone: <t t-esc="record.phone.value" />
												</div>
												<div t-if="record.mobile.raw_value">Mobile: <t t-esc="record.mobile.value" />
												</div>
											</div>
										</div>
									</t>
								</templates>
							</kanban>
						</field>
					</page>
				</xpath>
				<xpath expr="//page[2]" position="attributes">
					<attribute name="string">Contacts</attribute>
				</xpath>
			</field>
		</record>
		<record id="view_partner_user_tree" model="ir.ui.view">
			<field name="name">partner.user.tree</field>
			<field name="model">res.partner</field>
			<field name="inherit_id" ref="base.view_partner_tree"/>
			<field name="arch" type="xml">
				<field name="display_name" position="before">
					<field name="ref"/>
				</field>
			</field>
		</record>
	</data>
</odoo>

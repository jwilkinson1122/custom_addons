<?xml version="1.0" encoding="utf-8"?>

<odoo>
    <data noupdate="1">

        <record id="module_category_podiatry" model="ir.module.category">
            <field name="name">Podiatry Management</field>
            <field name="sequence">10</field>
        </record>

        <record id="group_podiatry_administration" model="res.groups">
            <field name="name">Administrator</field>
            <field name="category_id" ref="module_category_podiatry"/>
            <field name="users" eval="[(4, ref('base.user_root')),(4, ref('base.user_admin'))]"/>
        </record>

        <record id="group_podiatry_practitioner" model="res.groups">
            <field name="name">Practitioner</field>
            <field name="category_id" ref="module_category_podiatry"/>
        </record>

        <record id="group_podiatry_patient" model="res.groups">
            <field name="name">Patient</field>
            <field name="category_id" ref="module_category_podiatry"/>
        </record>

        <record id="group_podiatry_doctor" model="res.groups">
            <field name="name">Patient Doctor</field>
            <field name="category_id" ref="module_category_podiatry"/>
        </record>

        <record id="group_is_admission" model="res.groups">
            <field name="name">In Admission</field>
            <field name="category_id" ref="module_category_podiatry"/>
        </record>

        <!-- Rule For Creating Personal Podiatry Record As A Practitioner, Patient & Doctor-->

        <record id="rule_personal_medical_record" model="ir.rule">
            <field name="name">Rule Personal Medical Record</field>
            <field name="model_id" ref="model_podiatry_practice"/>
            <field name="domain_force">['|','|',('company_id.child_ids', 'child_of', [user.company_id.id]),('company_id', 'child_of', [user.company_id.id]),('company_id', '=', False)]</field>
            <field name="groups" eval="[(4, ref('group_podiatry_practitioner')),(4, ref('group_podiatry_patient')),(4, ref('group_podiatry_doctor'))]"/>
        </record>

        <!-- Rule For Patient Profile Record As A Patient -->

        <record id="rule_patient_profile_record_as_patient" model="ir.rule">
            <field name="name">Rule Patient Profile Record As A Patient</field>
            <field name="model_id" ref="model_patient_patient"/>
            <field name="global" eval="True"/>
            <field name="domain_force">[('user_id','=',user.id)]</field>
            <field name="groups" eval="[(4, ref('group_podiatry_patient'))]"/>
        </record>

        <!-- Rule For Patient Profile Record As An Administrator -->

        <record id="rule_patient_profile_record_as_admin" model="ir.rule">
            <field name="name">Rule Patient Profile Record As An Administrator</field>
            <field name="model_id" ref="model_patient_patient"/>
            <field name="global" eval="True"/>
            <!-- <field name="domain_force"> ['|','|',('company_id.child_ids','child_of',[user.company_id.id]),('company_id','child_of',[user.company_id.id]),('company_id','=',False)]</field> -->
            <field name="domain_force">['|','|',('company_id.child_ids','child_of',[user.company_id.id]),('company_id','child_of',[user.company_id.id]),('company_id','=',False)]</field>
            <field name="groups" eval="[(4, ref('group_podiatry_administration'))]"/>
        </record>

        <!-- Rule For Patient Profile Record As A Practitioner -->

        <record id="rule_patient_profile_record_as_practitioner" model="ir.rule">
            <field name="name">Rule Patient Profile Record As A Practitioner</field>
            <field name="model_id" ref="model_patient_patient"/>
            <field name="global" eval="True"/>
            <field name="domain_force">[('Podiatry_id.company_id','=',user.company_id.id)]</field>
            <field name="groups" eval="[(4, ref('group_podiatry_practitioner'))]"/>
        </record>

        <record id="rule_patient_profile_record_as_doctor" model="ir.rule">
            <field name="name">Rule Patient Profile Record As A Doctor</field>
            <field name="model_id" ref="model_patient_patient"/>
            <field name="global" eval="True"/>
            <field name="domain_force"> [('doctor_id.partner_id','=',user.partner_id.id)]</field>
            <field name="groups" eval="[(4, ref('group_podiatry_doctor'))]"/>
        </record>

        <!-- Rule For Podiatry Standard Record As An Administrator -->

        <record id="rule_podiatry_standard_record_as_admin" model="ir.rule">
            <field name="name">Rule Standard Record As An Administrator</field>
            <field name="model_id" ref="model_podiatry_standard"/>
            <field name="global" eval="True"/>
            <field name="domain_force"> ['|','|',('cmp_id.child_ids','child_of',[user.company_id.id]),('cmp_id','child_of',[user.company_id.id]),('cmp_id','=',False)]</field>
            <field name="groups" eval="[(4, ref('group_podiatry_administration'))]"/>
        </record>
        <!-- Record Rule practitioner can see standards related to Podiatry -->
        <record id="rule_podiatry_standard_practitioner" model="ir.rule">
            <field name="name">Practitioner Standard Record Rule</field>
            <field name="model_id" ref="model_podiatry_standard"/>
            <field name="global" eval="True"/>
            <field name="domain_force">[('practice_id.company_id','=',user.company_id.id)]</field>
            <field name="groups" eval="[(4, ref('group_podiatry_practitioner'))]"/>
        </record>

        <!-- Rule For News Update Record As A Patient & Practitioner -->
        <record id="rule_patient_news_update_record" model="ir.rule">
            <field name="name">Rule News Update Record</field>
            <field name="model_id" ref="model_patient_news"/>
            <field name="global" eval="True"/>
            <field name="domain_force">[('user_ids.id','=',user.id)]</field>
            <field name="groups" eval="[(4, ref('podiatry.group_podiatry_patient')),(4, ref('podiatry.group_podiatry_practitioner'))]"/>
        </record>

        <!-- Record Rule doctors can see reminder of own child -->
        <record id="doctors_reminder_record_rule" model="ir.rule">
            <field name="name">Doctors Reminder Record Rule</field>
            <field name="model_id" ref="model_patient_reminder"/>
            <field name="global" eval="True"/>
            <field name="domain_force">[('stu_id.doctor_id.partner_id','=',user.partner_id.id)]</field>
            <field name="groups" eval="[(4, ref('podiatry.group_podiatry_doctor'))]"/>
        </record>

        <!-- Record Rule patient can see reminder of their own  -->
        <record id="patient_reminder_record_rule" model="ir.rule">
            <field name="name">Patient Remainder Record Rule</field>
            <field name="model_id" ref="model_patient_reminder"/>
            <field name="global" eval="True"/>
            <field name="domain_force">[('stu_id.user_id','=',user.id)]</field>
            <field name="groups" eval="[(4, ref('podiatry.group_podiatry_patient'))]"/>
       </record>

       <!--  Rule For Practitioner -->
<!--        <record id="rule_podiatry_practitioner_own" model="ir.rule"> -->
<!--            <field name="name">Rule Practitioner Self</field> -->
<!--            <field name="model_id" ref="hr.model_hr_employee"/> -->
<!--            <field name="global" eval="True"/> -->
<!--            <field name="domain_force"> [('user_id','=',user.id)]</field> -->
<!--            <field name="groups" eval="[(4, ref('podiatry.group_podiatry_practitioner'))]"/> -->
<!--        </record> -->
       <record id="rule_personal_podiatry_practitioner" model="ir.rule">
           <field name="name">Rule Personal practitioner Record</field>
           <field name="model_id" ref="model_podiatry_practitioner"/>
           <field name="domain_force">[('employee_id.user_id.id', '=', user.id)]</field>
           <field name="groups" eval="[(4, ref('group_podiatry_practitioner'))]"/>
       </record>

       <!--  Rule For Doctor Profile Record As A Doctor -->
       <record id="rule_podiatry_doctors" model="ir.rule">
           <field name="name">Rule Doctor Profile Record As A Doctor</field>
           <field name="model_id" ref="model_podiatry_doctor"/>
           <field name="global" eval="True"/>
           <field name="domain_force"> [('partner_id','=', user.partner_id.id)]</field>
           <field name="groups" eval="[(4, ref('podiatry.group_podiatry_doctor'))]"/>
       </record>
       <!-- Record Rule patient can see own doctor -->
       <record id="rule_patient_doctor" model="ir.rule">
           <field name="name">Record rule patient can see own doctor</field>
           <field name="model_id" ref="model_podiatry_doctor"/>
           <field name="global" eval="True"/>
           <field name="domain_force"> [('patient_id.user_id','=', user.id)]</field>
           <field name="groups" eval="[(4, ref('podiatry.group_podiatry_patient'))]"/>
       </record>

       <!-- Rule For Patient Profile Record in Adminssion -->

        <record id="rule_patient_profile_record_as_patient_in_admission" model="ir.rule">
            <field name="name">Rule Patient Profile Record As A Patient for in Admission </field>
            <field name="model_id" ref="model_patient_patient"/>
            <field name="global" eval="True"/>
            <field name="domain_force">[('user_id','=',user.id)]</field>
            <field name="groups" eval="[(4, ref('group_is_admission'))]"/>
        </record>
    </data>
</odoo>

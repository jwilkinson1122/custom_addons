<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Tree View -->
    <record id="view_podiatry_prescription_list" model="ir.ui.view">
        <field name="name">Practitioner Prescriptions</field>
        <field name="model">podiatry.prescription</field>
        <field name="arch" type="xml">
            <tree decoration-muted="state in ['done', 'cancel']" decoration-bf="state=='draft'">
                <header>
                    <button type="action" name="%(action_prescription_message)d" string="Send Messages" />
                </header>
                <field name="name"/>
                <field name="state" invisible="True" />
                <field name="product_id" />
                <field name="request_date" />
                <field name="practitioner_id" />
                <field name="patient_id" />
                <field name="stage_id" />
                <field name="num_prescription_items" sum="Items" />
                <!-- <button name="print_prescription_report_ticket_size" class="btn btn-success" string="Print Rx" type="object"></button> -->
            </tree>
        </field>
    </record>

    <!-- Form View -->
    <record id="view_podiatry_prescription_form" model="ir.ui.view">
        <field name="name">Prescription</field>
        <field name="model">podiatry.prescription</field>
        <field name="arch" type="xml">
            <form string="Prescription">
                <header>
                    <field name="state" invisible="True" />
                    <field name="stage_id" widget="statusbar" options="{'clickable': True, 'fold_field': 'fold'}" />
                    <button name="open_customer" class="btn btn-success" states="in_process" string="Create Order" type="object"></button>
                    <!-- <button name="print_prescription_report_ticket_size" class="btn btn-success" string="Print RX" type="object"></button>
                    <button name="print_podiatry_prescription_report_ticket_size" class="btn btn-success" string="Print WO" type="object"></button> -->
                    <button name="prescription_report" type="object" string="Print Prescription" class="oe_highlight" />
                    <!-- <button name="%(action_create_prescription_invoice1)d" type="action" string="Create Invoice" class="oe_highlight" /> -->
                    <!-- <button name="%(action_create_prescription_shipment1)d" type="action" string="Create Shipment" class="oe_highlight" /> -->
                </header>
                <sheet>
                    <!-- <div class="oe_button_box" name="button_box">
                        <button name="action_open_prescriptions" type="object" class="oe_stat_button" icon="fa-file-text-o">
                            <div class="o_stat_info">
                                <field name="prescription_count" class="o_stat_value"/>
                                <span class="o_stat_text">Prescriptions</span>
                            </div>
                        </button>
                    </div> -->
                    <div class="oe_title">
                        <label for="name" class="oe_edit_only" />
                        <h1>
                            <field name="name" readonly="1" />
                        </h1>
                    </div>
                    <group>
                        <group string="Account Info">
                            <!-- <field name="customer" domain="[('company_id', '=', False)]" attrs="{'readonly': [('state','=','done')]}" required="1"/> -->
                            <field name="practice_id" required="1" options="{&quot;always_reload&quot;: 1}" />
                            <field name="practitioner_id" required="1" />
                        </group>
                        <group string="Patient Info">
                            <field name="patient_id" required="1" options="{&quot;always_reload&quot;: 1}" />
                            <field name="prescription_type" attrs="{'readonly': [('state','=','done')]}" required="1"/>
                        </group>
                    </group>
                    <group string="Order Info">
                        <group>
                            <field name="bookin_date" />
                            <field name="user_id" />
                        </group>
                        <group>
                            <field name="rush_order" />
                            <field name="ship_to_patient" />
                            <field name="prior_rx"/>
                            <!-- <field name="patient_prescription_ids" attrs="{'invisible': [('prior_rx','!=',True)]}"/> -->
                        </group>
                        <group>
                            <field name="left_only"/>
                            <field name="right_only"/>
                        </group>
                        <br/>
                        <br />
                        <!-- <group>
                            <field name="foot_selection" widget="radio" options="{'horizontal': true}"/>
                        </group> -->
                        <br/>
                        <br />
                    </group>
                    <notebook>
                        <page string="Prescription Lines">
                            <div>
                                <button name="%(action_import_product_to_prescription)d" class="btn-primary" style="margin:12px 0px 12px 0px;" string="Add Products" icon="fa-plus-circle" Help="Prescription Products to Import" type="action" attrs="{'invisible':[('state','not in', ['draft', 'done'])]}" />

                            </div>
                            <!-- <field name="prescription_line" widget="many2many_kanban" domain="[('prescription_id', '=', False)]" /> -->
                            <field name="prescription_line" widget="section_and_note_one2many" mode="tree,kanban" options="{&quot;always_reload&quot;: 1}" domain="[('prescription_id', '=', False)]" attrs="{'readonly': [('state', 'in', ('done','cancel'))]}">
                                <tree string="Prescription Lines" editable="bottom">
                                    <control>
                                        <create name="add_product_control" string="Add a product"/>
                                        <create name="add_section_control" string="Add a section" context="{'default_display_type': 'line_section'}"/>
                                        <create name="add_note_control" string="Add a note" context="{'default_display_type': 'line_note'}"/>
                                    </control>
                                    <field name="sequence" widget="handle" />
                                    <field name="display_type" invisible="1"/>
                                    <field name="product_uom_category_id" invisible="1"/>
                                    <field name="product_updatable" invisible="1"/>
                                    <field name="product_id" attrs="{'readonly': [('product_updatable', '=', False)], 'required': [('display_type', '=', False)]}" />
                                    <field name="product_template_id" string="Product" invisible="1" attrs="{'readonly': [('product_updatable', '=', False)], 'required': [('display_type', '=', False)]}"/>
                                    <field name="name" widget="section_and_note_text" optional="show"/>
                                    <field name="left_only"/>
                                    <field name="right_only"/>

                                    <field name="product_uom_qty"/>
                                    <field name="price_unit"/>

                                    <field name="product_uom" force_save="1" string="UoM" groups="uom.group_uom" options='{"no_open": True}' optional="show" />
                                    <field name="state" invisible="1"/>
                                </tree>

                                <kanban class="o_kanban_mobile">
                                    <field name="name"/>
                                    <field name="product_id"/>
                                    <field name="product_uom_qty"/>
                                    <field name="product_uom" groups="uom.group_uom"/>
                                    <!-- <field name="price_subtotal"/>
                                        <field name="price_total"/>
                                        <field name="price_tax" invisible="1"/>
                                        <field name="price_total" invisible="1"/> -->
                                    <field name="left_only"/>
                                    <field name="right_only"/>

                                    <field name="price_unit"/>
                                    <field name="display_type"/>
                                    <!-- <field name="tax_id" invisible="1"/>
                                        <field name="company_id" invisible="1"/> -->
                                    <templates>
                                        <t t-name="kanban-box">
                                            <div t-attf-class="oe_kanban_card oe_kanban_global_click pl-0 pr-0 {{ record.display_type.raw_value ? 'o_is_' + record.display_type.raw_value : '' }}">
                                                <t t-if="!record.display_type.raw_value">
                                                    <div class="row no-gutters">
                                                        <div class="col-2 pr-3">
                                                            <img t-att-src="kanban_image('product.product', 'image_128', record.product_id.raw_value)" t-att-title="record.product_id.value" t-att-alt="record.product_id.value" style="max-width: 100%;"/>
                                                        </div>
                                                        <div class="col-10">
                                                            <div class="row">
                                                                <div class="col">
                                                                    <strong t-esc="record.product_id.value" />
                                                                </div>
                                                                <!-- <div class="col-auto">
                                                                        <t t-set="line_price" t-value="record.price_subtotal.value" groups="account.group_show_line_subtotals_tax_excluded"/>
                                                                        <t t-set="line_price" t-value="record.price_total.value" groups="account.group_show_line_subtotals_tax_included"/>
                                                                        <strong class="float-right text-right" t-esc="line_price" />
                                                                    </div> -->
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-12 text-muted">
                                                                    Quantity:
                                                                    <t t-esc="record.product_uom_qty.value"/>
                                                                    <t t-esc="record.product_uom.value"/>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-12 text-muted">
                                                                    Unit Price:
                                                                    <t t-esc="record.price_unit.value"/>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </t>
                                                <t t-if="record.display_type.raw_value === 'line_section' || record.display_type.raw_value === 'line_note'">
                                                    <div class="row">
                                                        <div class="col-12">
                                                            <t t-esc="record.name.value"/>
                                                        </div>
                                                    </div>
                                                </t>
                                            </div>
                                        </t>
                                    </templates>
                                </kanban>
                            </field>
                            <group name="note_group" col="6" class="mt-2 mt-md-0">
                                <group colspan="4">
                                    <field name="notes" class="oe-bordered-editor" nolabel="1" placeholder="Notes..."/>
                                </group>
                                <!-- <group class="oe_subtotal_footer oe_right" colspan="2" name="sale_total">
                                        <field name="tax_totals_json" widget="account-tax-totals-field" nolabel="1" colspan="2"/>
                                    </group> -->
                                <div class="oe_clear"/>
                            </group>

                        </page>
                        <page string="Values">
                            <table name="forefoot_values_table" border="1" bordercolor="gray" style="width:100%" attrs="{'readonly': [('state', '=', 'done')]}">
                                <tr>
                                    <td style="width: 19%; padding-left:8px; padding-right:8px; text-align:center; background-color:#ECECEC; font-weight:bold">FOREFOOT VALUES</td>
                                    <td style="width: 15%; padding-left:8px; padding-right:8px; text-align:center; background-color:#ECECEC; font-weight:bold" attrs="{'invisible': [('right_only', '=', True)]}">LEFT</td>
                                    <td style="width: 15%; padding-left:8px; padding-right:8px; text-align:center; background-color:#ECECEC; font-weight:bold" attrs="{'invisible': [('left_only', '=', True)]}">RIGHT</td>
                                </tr>
                                <tr name="varus_forefoot_values">
                                    <td style="padding:4px; text-align:center; font-weight:bold">VARUS</td>
                                    <td style="padding:4px; text-align:center" attrs="{'invisible': [('right_only', '=', True)]}">
                                        <field name="ff_varus_lt" attrs="{'invisible': [('right_only', '=', True)]}"/>
                                    </td>
                                    <td style="padding:4px; text-align:center" attrs="{'invisible': [('left_only', '=', True)]}">
                                        <field name="ff_varus_rt" attrs="{'invisible': [('left_only', '=', True)]}"/>
                                    </td>
                                </tr>
                                <tr name="valgus_forefoot_values">
                                    <td style="padding:4px; text-align:center; font-weight:bold">VALGUS</td>
                                    <td style="padding:4px; text-align:center" attrs="{'invisible': [('right_only', '=', True)]}">
                                        <field name="ff_valgus_lt" attrs="{'invisible': [('right_only', '=', True)]}"/>
                                    </td>
                                    <td style="padding:4px; text-align:center" attrs="{'invisible': [('left_only', '=', True)]}">
                                        <field name="ff_valgus_rt" attrs="{'invisible': [('left_only', '=', True)]}"/>
                                    </td>
                                </tr>
                            </table>
                            <br/>
                            <br/>

                            <table name="forefoot_corrections_table" border="1" bordercolor="gray" style="width:100%" attrs="{'readonly': [('state', '=', 'done')]}">
                                <tr>
                                    <td style="width: 19%; padding-left:8px; padding-right:8px; text-align:center; background-color:#ECECEC; font-weight:bold">FOREFOOT CORRECTIONS</td>
                                    <td style="width: 15%; padding-left:8px; padding-right:8px; text-align:center; background-color:#ECECEC; font-weight:bold" attrs="{'invisible': [('right_only', '=', True)]}">LEFT</td>
                                    <td style="width: 15%; padding-left:8px; padding-right:8px; text-align:center; background-color:#ECECEC; font-weight:bold" attrs="{'invisible': [('left_only', '=', True)]}">RIGHT</td>
                                </tr>
                                <tr name="forefoot_varus_intrinsic_values">
                                    <td style="padding:4px; text-align:center; font-weight:bold">VARUS INTRINSIC</td>
                                    <td style="padding:4px; text-align:center" attrs="{'invisible': [('right_only', '=', True)]}">
                                        <field name="ff_varus_intrinsic_lt" attrs="{'invisible': [('right_only', '=', True)]}"/>
                                    </td>
                                    <td style="padding:4px; text-align:center" attrs="{'invisible': [('left_only', '=', True)]}">
                                        <field name="ff_varus_intrinsic_rt" attrs="{'invisible': [('left_only', '=', True)]}"/>
                                    </td>
                                </tr>
                                <tr name="forefoot_valgus_intrinsic_values">
                                    <td style="padding:4px; text-align:center; font-weight:bold">VALGUS INTRINSIC</td>
                                    <td style="padding:4px; text-align:center" attrs="{'invisible': [('right_only', '=', True)]}">
                                        <field name="ff_valgus_intrinsic_lt" attrs="{'invisible': [('right_only', '=', True)]}"/>
                                    </td>
                                    <td style="padding:4px; text-align:center" attrs="{'invisible': [('left_only', '=', True)]}">
                                        <field name="ff_valgus_intrinsic_rt" attrs="{'invisible': [('left_only', '=', True)]}"/>
                                    </td>
                                </tr>
                                <tr name="forefoot_varus_extrinsic_values">
                                    <td style="padding:4px; text-align:center; font-weight:bold">VARUS EXTRINSIC</td>
                                    <td style="padding:4px; text-align:center" attrs="{'invisible': [('right_only', '=', True)]}">
                                        <field name="ff_varus_extrinsic_lt" attrs="{'invisible': [('right_only', '=', True)]}"/>
                                    </td>
                                    <td style="padding:4px; text-align:center" attrs="{'invisible': [('left_only', '=', True)]}">
                                        <field name="ff_varus_extrinsic_rt" attrs="{'invisible': [('left_only', '=', True)]}"/>
                                    </td>
                                </tr>
                                <tr name="forefoot_valgus_extrinsic_values">
                                    <td style="padding:4px; text-align:center; font-weight:bold">VALGUS EXTRINSIC</td>
                                    <td style="padding:4px; text-align:center" attrs="{'invisible': [('right_only', '=', True)]}">
                                        <field name="ff_valgus_extrinsic_lt" attrs="{'invisible': [('right_only', '=', True)]}"/>
                                    </td>
                                    <td style="padding:4px; text-align:center" attrs="{'invisible': [('left_only', '=', True)]}">
                                        <field name="ff_valgus_extrinsic_rt" attrs="{'invisible': [('left_only', '=', True)]}"/>
                                    </td>
                                </tr>
                            </table>
                            <br/>
                            <br/>

                            <table name="rearfoot_corrections_table" border="1" bordercolor="gray" style="width:100%" attrs="{'readonly': [('state', '=', 'done')]}">
                                <tr>
                                    <td style="width: 19%; padding-left:8px; padding-right:8px; text-align:center; background-color:#ECECEC; font-weight:bold">REARFOOT CORRECTIONS</td>
                                    <td style="width: 15%; padding-left:8px; padding-right:8px; text-align:center; background-color:#ECECEC; font-weight:bold" attrs="{'invisible': [('right_only', '=', True)]}">LEFT</td>
                                    <td style="width: 15%; padding-left:8px; padding-right:8px; text-align:center; background-color:#ECECEC; font-weight:bold" attrs="{'invisible': [('left_only', '=', True)]}">RIGHT</td>
                                </tr>
                                <tr name="rearfoot_varus_values">
                                    <td style="padding:4px; text-align:center; font-weight:bold">VARUS</td>
                                    <td style="padding:4px; text-align:center" attrs="{'invisible': [('right_only', '=', True)]}">
                                        <field name="rf_varus_lt" attrs="{'invisible': [('right_only', '=', True)]}"/>
                                    </td>
                                    <td style="padding:4px; text-align:center" attrs="{'invisible': [('left_only', '=', True)]}">
                                        <field name="rf_varus_rt" attrs="{'invisible': [('left_only', '=', True)]}"/>
                                    </td>
                                </tr>

                                <tr name="rearfoot_valgus_values">
                                    <td style="padding:4px; text-align:center; font-weight:bold">VALGUS</td>
                                    <td style="padding:4px; text-align:center" attrs="{'invisible': [('right_only', '=', True)]}">
                                        <field name="rf_valgus_lt" attrs="{'invisible': [('right_only', '=', True)]}"/>
                                    </td>
                                    <td style="padding:4px; text-align:center" attrs="{'invisible': [('left_only', '=', True)]}">
                                        <field name="rf_valgus_rt" attrs="{'invisible': [('left_only', '=', True)]}"/>
                                    </td>
                                </tr>

                                <tr name="rearfoot_neutral_values">
                                    <td style="padding:4px; text-align:center; font-weight:bold">NEUTRAL</td>
                                    <td style="padding:4px; text-align:center" attrs="{'invisible': [('right_only', '=', True)]}">
                                        <field name="rf_neutral_lt" attrs="{'invisible': [('right_only', '=', True)]}"/>
                                    </td>
                                    <td style="padding:4px; text-align:center" attrs="{'invisible': [('left_only', '=', True)]}">
                                        <field name="rf_neutral_rt" attrs="{'invisible': [('left_only', '=', True)]}"/>
                                    </td>
                                </tr>

                            </table>
                            <br/>
                            <br/>

                            <table name="orthotic_measure_table" border="1" bordercolor="gray" style="width:100%" attrs="{'readonly': [('state', '=', 'done')]}">
                                <tr>
                                    <td style="width: 19%; padding-left:8px; padding-right:8px; text-align:center; background-color:#ECECEC; font-weight:bold">ORTHOTIC MEASURES</td>
                                    <td style="width: 15%; padding-left:8px; padding-right:8px; text-align:center; background-color:#ECECEC; font-weight:bold" attrs="{'invisible': [('right_only', '=', True)]}">LEFT</td>
                                    <td style="width: 15%; padding-left:8px; padding-right:8px; text-align:center; background-color:#ECECEC; font-weight:bold" attrs="{'invisible': [('left_only', '=', True)]}">RIGHT</td>
                                </tr>
                                <tr name="forefoot_length_values">
                                    <td style="padding:4px; text-align:center; font-weight:bold">FOREFOOT LENGTH</td>
                                    <td style="padding:4px; text-align:center" attrs="{'invisible': [('right_only', '=', True)]}">
                                        <field name="ff_length_lt" attrs="{'invisible': [('right_only', '=', True)]}"/>
                                    </td>
                                    <td style="padding:4px; text-align:center" attrs="{'invisible': [('left_only', '=', True)]}">
                                        <field name="ff_length_rt" attrs="{'invisible': [('left_only', '=', True)]}"/>
                                    </td>
                                </tr>

                                <tr name="heel_depth_values">
                                    <td style="padding:4px; text-align:center; font-weight:bold">HEEL DEPTH</td>
                                    <td style="padding:4px; text-align:center" attrs="{'invisible': [('right_only', '=', True)]}">
                                        <field name="heel_depth_lt" attrs="{'invisible': [('right_only', '=', True)]}"/>
                                    </td>
                                    <td style="padding:4px; text-align:center" attrs="{'invisible': [('left_only', '=', True)]}">
                                        <field name="heel_depth_rt" attrs="{'invisible': [('left_only', '=', True)]}"/>
                                    </td>
                                </tr>

                                <tr name="length_values">
                                    <td style="padding:4px; text-align:center; font-weight:bold">LENGTH</td>
                                    <td style="padding:4px; text-align:center" attrs="{'invisible': [('right_only', '=', True)]}">
                                        <field name="orthotic_length_lt" attrs="{'invisible': [('right_only', '=', True)]}"/>
                                    </td>
                                    <td style="padding:4px; text-align:center" attrs="{'invisible': [('left_only', '=', True)]}">
                                        <field name="orthotic_length_rt" attrs="{'invisible': [('left_only', '=', True)]}"/>
                                    </td>
                                </tr>

                                <tr name="cap_size_values">
                                    <td style="padding:4px; text-align:center; font-weight:bold">CAP SIZE</td>
                                    <td style="padding:4px; text-align:center" attrs="{'invisible': [('right_only', '=', True)]}">
                                        <field name="cap_size_lt" attrs="{'invisible': [('right_only', '=', True)]}"/>
                                    </td>
                                    <td style="padding:4px; text-align:center" attrs="{'invisible': [('left_only', '=', True)]}">
                                        <field name="cap_size_rt" attrs="{'invisible': [('left_only', '=', True)]}"/>
                                    </td>
                                </tr>
                            </table>
                            <br/>
                            <br/>
                        </page>

                        <page string="Documents Test">
                            <field name="test_file" widget="pdf_viewer"/>
                        </page>

                        <page string="Documents">
                            <group name="photo_group_tlOo2">
                                <group name="photo_group_tlOo2_left">
                                    <field widget="image" options='{"size": [0, 150]}' name="foot_image1" string="Left Image" />
                                </group>
                                <group name="photo_group_tlOo2_right">
                                    <field widget="image" options='{"size": [0, 150]}' name="foot_image2" string="Right Image" />
                                </group>
                            </group>
                            <group name="obj_group_DPydw">
                                <group name="obj_group_DPydw_left">
                                    <field name="left_obj_model" string="Left Scan" />

                                </group>
                                <group name="obj_group_DPydw_right">
                                    <field name="right_obj_model" string="Right Scan" />
                                </group>
                            </group>
                            <group string="Rx Attachement">
                                <field name="attachment_ids" widget="many2many_binary" class="oe_inline"/>
                            </group>
                        </page>
                        <page string="Special Instructions">
                        </page>

                    </notebook>
                    <!-- <button name="prescription_report" type="object" string="Print Prescription" class="oe_highlight" />
                    <button name="%(action_create_prescription_invoice1)d" type="action" string="Create Invoice" class="oe_highlight" /> -->
                </sheet>
                <!-- Discuss widgets -->
                <div class="oe_chatter">
                    <field name="message_follower_ids" widget="mail_followers" />
                    <field name="activity_ids" widget="mail_activity" />
                    <field name="message_ids" widget="mail_thread" />
                </div>
            </form>
        </field>
    </record>

    <!-- Search -->
    <record id="view_podiatry_prescription_filter" model="ir.ui.view">
        <field name="model">podiatry.prescription</field>
        <field name="arch" type="xml">
            <search>
                <field name="name" />
                <field name="stage_id"/>
                <!-- <field name="practitioner_id" /> -->
                <field name="user_id" />

                <filter name="filter_not_done" string="To Return" domain="[('state','=','draft')]" />
                <filter name="filter_my_prescriptions" string="My Prescriptions" domain="[('user_id','=',uid)]" />
                <!-- <filter name="group_user" string="By Practitioner" context="{'group_by': 'practitioner_id'}" /> -->

                <searchpanel>
                    <!-- <field name="practitioner_id" enable_counters="1" /> -->
                    <field name="stage_id" select="multi" />
                </searchpanel>

            </search>

        </field>
    </record>

    <!-- Activity View -->
    <record id="view_podiatry_prescription_activity" model="ir.ui.view">
        <field name="model">podiatry.prescription</field>
        <field name="arch" type="xml">
            <activity string="Prescriptions">
                <templates>
                    <div t-name="activity-box">
                        <div>
                            <field name="name" />
                        </div>
                    </div>
                </templates>
            </activity>
        </field>
    </record>

    <!-- Calendar View -->
    <record id="view_podiatry_prescription_calendar" model="ir.ui.view">
        <field name="name">Practitioner Prescriptions</field>
        <field name="model">podiatry.prescription</field>
        <field eval="2" name="priority" />
        <field name="arch" type="xml">
            <calendar date_start="date" string="orders" mode="month" color="color">
                <field name="stage_id" type="col" />
                <field name="patient_id" />
                <field name="practitioner_id" />
                <field name="date" />
            </calendar>
        </field>
    </record>

    <!-- Pivot View -->
    <record id="view_podiatry_prescription_pivot" model="ir.ui.view">
        <field name="model">podiatry.prescription</field>
        <field name="arch" type="xml">
            <pivot>
                <field name="stage_id" type="col" />
                <field name="practitioner_id" />
                <field name="request_date" interval="week" />
                <field name="num_prescription_items" type="measure" />
            </pivot>
        </field>
    </record>

    <!-- Graph View -->
    <record id="view_podiatry_prescription_graph" model="ir.ui.view">
        <field name="model">podiatry.prescription</field>
        <field name="arch" type="xml">
            <graph type="bar">
                <field name="stage_id" />
                <field name="num_prescription_items" type="measure" />
            </graph>
        </field>
    </record>

    <record id="action_pod_prescriptions" model="ir.actions.act_window">
        <field name="name">Prescriptions</field>
        <field name="res_model">podiatry.prescription</field>
        <field name="view_mode">kanban,tree,form,calendar,pivot,graph,activity</field>
    </record>

</odoo>

 
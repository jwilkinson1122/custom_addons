<?xml version="1.0" encoding="UTF-8"?>
<odoo>

    <record id="podiatry_patient_view_condition_search" model="ir.ui.view">
        <field name="name">podiatry.patient.condition.search</field>
        <field name="model">podiatry.patient.condition</field>
        <field name="priority" eval="8" />
        <field name="arch" type="xml">
            <search string="Podiatry Patient Condition">
                <field name="name" />
                <field name="treatment_description" />

                <field name="pathology_id" />
                <field name="physician_id" />
                <!-- <field name="diagnosed_date" /> -->
                <field name="notes" />
                <field name="patient_id" />
                <field name="short_comment" />
                <!-- <filter name="is_managed" string="Is on Treatment" domain="[('is_managed', '=', True)]" />
                <separator/> -->
                <filter name="inactive" string="Inactive" domain="[('active', '=', False)]" />
                <separator/>
                <group expand="0" string="Group By...">
                    <filter string="Condition" name="Condition" context="{'group_by':'pathology_id'}" />
                    <filter string="Physician" name="Physician" context="{'group_by':'physician_id'}" />
                    <!-- <filter string="Currently on Treatment" name="Treatment" context="{'group_by':'is_managed'}" /> -->
                    <!-- <filter string="Date of Diagnosis" name="DDiagnosis" context="{'group_by':'diagnosed_date'}" /> -->
                    <filter string="Patient" name="Patient" context="{'group_by':'patient_id'}" />
                    <!-- <filter string="Age when diagnosed" name="AgeWhenDiagnosed" context="{'group_by':'age'}" /> -->
                    <!-- <filter string="Start" name="Start" context="{'group_by':'treatment_start_date'}" /> -->
                    <filter string="State" name="State" context="{'group_by':'state'}" />
                </group>
            </search>
        </field>
    </record>

    <record id="podiatry_patient_view_condition_tree" model="ir.ui.view">
        <field name="name">podiatry.patient.condition.tree</field>
        <field name="model">podiatry.patient.condition</field>
        <field name="priority" eval="8" />
        <field name="arch" type="xml">
            <tree string="Podiatry Patient Condition">
                <field name="name" />
                <field name="patient_id" />
                <field name="physician_id" />
                <field name="state" />

                <!-- <field name="age" /> -->
                <!-- <field name="diagnosed_date" />
                <field name="is_managed" />
               -->
            </tree>
        </field>
    </record>

    <record id="podiatry_patient_view_condition_form" model="ir.ui.view">
        <field name="name">podiatry.patient.condition.form</field>
        <field name="model">podiatry.patient.condition</field>
        <field name="arch" type="xml">
            <form string="Podiatry Patient Condition">
                <header>
                    <span attrs="{'invisible': [('id','=',False)]}" groups="podiatry.group_podiatry_user">
                        <button name="action_invalidate" string="Invalidate" type="object" confirm="Invalidate Condition: proceed anyway?" attrs="{'invisible': [('active','=', False)]}"/>
                        <button name="action_revalidate" string="Reactivate" type="object" confirm="Reactivate document: proceed anyway?" attrs="{'invisible': [('active','=',True)]}"/>
                    </span>
                    <field name="state" widget="statusbar" clickable="True" />
                </header>
                <sheet>
                    <div class="oe_title" name="title">
                        <label for="name" class="edit_only"/>
                        <h1>
                            <field name="name"/>
                        </h1>
                    </div>
                    <div class="oe_right oe_button_box" name="buttons">
                    </div>

                    <group name="data">
                        <group name="main">
                            <group name="main_informations1">
                                <field name="patient_id"/>
                                <field name="short_comment"/>
                                <field name="treatment_description"/>
                            </group>
                            <group name="main_informations2">
                                <field name="pathology_id"/>
                                <field name="physician_id"/>
                            </group>
                            <!-- <group name="complementary_informations">
                                <field name="age"/>
                            </group> -->
                            <!-- <group name="dates">
                                <field name="diagnosed_date"/>
                                <field name="treatment_start_date"/>
                                <field name="treatment_end_date"/>
                                <field name="is_managed"/>
                              
                            </group> -->
                        </group>
                    </group>

                    <group name="state" attrs="{'invisible': [('id','=',False)]}">
                        <group name="validity">
                            <field name="create_date" />
                            <field name="expire_date" attrs="{'invisible': [('active','=',True)]}" />
                        </group>
                    </group>

                    <notebook>
                        <page string="Others" name="notes" autofocus="autofocus">
                            <separator string="Notes"/>
                            <field name="notes" />
                        </page>
                    </notebook>
                    <div name="configurator" class="oe_form_sheetbg" groups="podiatry.group_podiatry_configurator">
                        <div class="oe_formview oe_form_sheet_width">
                            <h3>More Info</h3>
                            <group name="moreinfo">
                                <field name="id"/>
                                <field name="active"/>
                                <field name="display_name"/>
                            </group>
                        </div>
                    </div>
                </sheet>
            </form>
        </field>
    </record>

    <record model="ir.actions.act_window" id="podiatry_patient_condition_action">
        <field name="name">Patient Conditions</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">podiatry.patient.condition</field>
        <field name="view_mode">tree,form</field>
        <field name="view_id" ref="podiatry_patient_view_condition_tree" />
        <field name="search_view_id" ref="podiatry_patient_view_condition_search" />
        <field name="domain">[]</field>
        <field name="context">{}</field>
    </record>
</odoo>
